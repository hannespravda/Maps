<!DOCTYPE html>
<html lang="de">
<head>
    <title>Eins, Zwei, Kletterei</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- location -->
    <link rel="stylesheet" href="leaflet-locatecontrol-gh-pages\dist\L.Control.Locate.mapbox.min.css"/>
    <script src="leaflet-locatecontrol-gh-pages\dist\L.Control.Locate.min.js"></script>

    <!-- geo search -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <!-- leaflet-elevation -->
    <link rel="stylesheet" href="https://unpkg.com/@raruto/leaflet-elevation/dist/leaflet-elevation.css" />
    <script src="https://unpkg.com/@raruto/leaflet-elevation/dist/leaflet-elevation.js"></script>

    <!-- dual slider -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.1/nouislider.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.1/nouislider.min.js"></script>

    <!-- style -->
    <style>
        /* body */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
    
        /* map */
        #map {
            flex: 1;
            height: 100%;
        }
        .leaflet-top.leaflet-right .leaflet-control {
            top: 35px;
            user-select: none;
        }
        path.leaflet-interactive:focus {
            outline: 2px solid rgb(126, 121, 121);
            border-radius: 5px
        }
        .leaflet-top.leaflet-left .leaflet-control {
            top: 40px;
            user-select: none;
        }   
        input[type=checkbox] {
            accent-color: lightblue;
        }
        input[type=radio] {
            accent-color: rgb(126, 121, 121);
        }
    
        /* elevation profile */
        #elevation-div {
            height: 0;
            font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
            overflow: hidden;
            transition: height 0.3s ease;
        }
        .elevation-toggle-icon {
            display: none !important;
        }
        .elevation-detached.elevation-collapsed .elevation-summary {
            display: none !important;
        }
        .elevation-detached.elevation-expanded .elevation-summary {
            display: none !important;
        }
        .elevation-control .background {
            background-color: rgb(255,255,255);
        }
        #custom-close-button {
            position: absolute;
            bottom: 200px;
            right: 10px;
            cursor: pointer;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: rgb(255,255,255,0);
            display: flex;
            color: rgb(179, 108, 108); 
        }
        .elevationprofile-textbox {
            position: absolute;
            bottom: 176px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgb(255,255,255,0);
            padding: 0px;
            border: 0px solid #ccc;
            z-index: 1000;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 15px;
            width: 1200px;
            max-width: 1200px;
            color: rgb(126, 121, 121);
            text-align: center;
        }
        .textbox-link {
            color: lightblue;
        }

        /* Filter1 and Filter 2 */
        #filter1-toggle {
            position: absolute;
            top: 10px;
            left: 97.3%;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: white;
            font-family: Helvetica, Arial, sans-serif;
            padding: 5px;
            text-align: center;
            width: 33px;
            cursor: pointer;
            user-select: none;
            font-size: 0.75rem;
            line-height: 1.5;
            box-shadow: none;
            border: 2px solid rgba(0,0,0,0.2);
            background-clip: padding-box;
            border-radius: 4px;
        }
        #filter1 {
            position: absolute;
            top: 10px;
            left: 80.5%;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: white;
            border: 2px solid rgba(0,0,0,0.2);
            background-clip: padding-box;
            border-radius: 4px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            padding: 5px;
            text-align: center;
            width: 360px;
            user-select: none;
            color: rgb(126, 121, 121);
        }
        #filter2-toggle {
            margin-left: -1px;
            background-color: white;
            color: rgb(126, 121, 121);
            border: 0px solid #ccc;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            text-align: left;
            cursor: pointer;
            user-select: none;
        }
        #filter2 {
            position: absolute;
            top: 16px;
            left: 610px;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: white;
            border: 2px solid rgba(0,0,0,0.2);
            background-clip: padding-box;
            border-radius: 4px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            padding: 5px;
            text-align: center;
            width: 360px;
            user-select: none;
            color: rgb(126, 121, 121);
        }
        .filter-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .separator-line {
            border-top: 1px solid #ccc;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        #applyFilter2,
        #applyFilter1 {
            background-color: rgb(0,0,0,0);
            color: lightblue;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 14px;
            text-align: left;
            border: none;
            cursor: pointer;
            user-select: none;
        }
        #resetFilter2,
        #resetFilter1 {
            text-align: right;
            font-size: 14px;
            background-color: rgb(0,0,0,0);
            border: none;
            color: rgb(179, 108, 108); /* Text color */
            cursor: pointer;
            user-select: none;
            margin-left: 100px;
        }

        /* List */
        #table-toggle {
            position: absolute;
            top: 10px;
            left: 2.1%;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: white;
            color: rgb(126, 121, 121);
            font-family: Helvetica, Arial, sans-serif;
            font-size: 0.75rem;
            line-height: 1.5;
            padding: 5px;
            text-align: center;
            width: auto;
            cursor: pointer;
            user-select: none;
            box-shadow: none;
            border: 2px solid rgba(0,0,0,0.2);
            background-clip: padding-box;
            border-radius: 4px;
        }
        #table-container {
            position: absolute;
            top: 10px;
            left: 29%;
            transform: translate(-50%);
            z-index: 1000;
            background-color: white;
            color: rgb(126, 121, 121);
            border: 2px solid rgba(0,0,0,0.2);
            background-clip: padding-box;
            border-radius: 4px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            text-align: left;
            max-width: 640px;
            max-height: 555px;
            overflow: auto;
            display: none;
            user-select: none;
        }
        #data-table th,
        #data-table td {
            padding: 8px;
        }
        #data-table th:nth-child(1),
        #data-table td:nth-child(1) {
            width: 1px;
        }
        #data-table th:nth-child(2),
        #data-table td:nth-child(2) {
            width: 1px;
        }
        #data-table th:nth-child(3),
        #data-table td:nth-child(3) {
            width: 276px;
        }
        #data-table th:nth-child(4),
        #data-table td:nth-child(4) {
            width: 50px;
        }
        #data-table th:nth-child(5),
        #data-table td:nth-child(5) {
            width: 50px;
        }
        #data-table th:nth-child(6),
        #data-table td:nth-child(6) {
            width: 50px;
        }
        #data-table th:nth-child(7),
        #data-table td:nth-child(7) {
            width: 50px;
        }
        #data-table th:nth-child(8),
        #data-table td:nth-child(8) {
            width: 50px;
        }

        /* show more table */
        .additional-info {
            background-color: #f2f2f2;
            padding: 1px;
            margin-left: 65px;
            margin-top: -15px;
        }
        .hidden {
            display: none;
        }
        .show-more-button {
            background-color: white;
            color: lightblue;
            border-radius: 0px;
            cursor: pointer;
            user-select: none;
        }

        /* sort container */
        .sort-container {
            display: flex;
            align-items: center;
            padding: 10px;
        }
        .sort-container label {
            margin-right: 10px;
        }
        #sort-options {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            border: 1px solid rgb(126, 121, 121);
            color: rgb(126, 121, 121);
            border-radius: 3px;
            padding: 1px;
        }
        #sort-options:focus {
            outline: 1px solid lightblue;
            border-color: lightblue;
        }
        #toggle-sort-order {
            margin-left: 5px;
            background-color: white;
            border: 0px solid #ccc;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            text-align: left;
            cursor: pointer;
            color: lightblue;
            user-select: none;
        }

        /* eye buttons */
        .eye-button {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            cursor: pointer;
            background-size: contain;
            background-position: center;
            background-color: rgb(255,255,255,0);
            background-image: url('Images/hidden.png');
            border: none;
            font-family: Helvetica, Arial, sans-serif;
            user-select: none;
        }
        #select-all {
            margin-left: -1px;
            background-color: white;
            color: lightblue;
            border: 0px solid #ccc;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            text-align: left;
            cursor: pointer;
            user-select: none;
        }
        #deselect-all {
            margin-left: -1px;
            background-color: white;
            color: rgb(179, 108, 108);
            border: 0px solid #ccc;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            text-align: left;
            cursor: pointer;
            user-select: none;
        }

        /* search bar */
        #search-container {
            position: absolute;
            display: flex;
            align-items: center;
            left: 460px;
            top: 7px;
            width: 150px;
         }
        #search-input {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            padding: 2px;
            flex: 1;
            border: 1px solid rgb(126, 121, 121);
            color: rgb(126, 121, 121);
            border-radius: 5px;
            width: 120px;
        }
        #search-input:focus {
            outline: 2px solid lightblue;
            border-color: lightblue;
            color: rgb(126, 121, 121);
        }
        #clear-search {
            background-color: white;
            color: rgb(126, 121, 121);
            border: none;
            padding: 0px 0px;
            cursor: pointer;
            position: absolute;
            left: 88%;
        }
        #clear-search:hover {
            color: rgb(179, 108, 108);
        }

        /* country buttons */
        #button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .round-button {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            background-size: contain;
            background-position: center;
            border: 1px solid;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 9px;
            padding: 0px;
            text-align: center;
            color: rgb(126, 121, 121);
            margin-right: 5px;
        }
        #Passbutton2,
        #Passbutton1 {
            background-image: url('Images/blau.png');
            margin-top: 0px;
        }
        #Climbbutton2,
        #Climbbutton1 {
            background-image: url('Images/gelb.png');
            margin-top: 0px;
        }
        #Sackgassebutton2,
        #Sackgassebutton1 {
            background-image: url('Images/rot.png');
            margin-top: 0px;
        }
        label[for="Passbutton1"] {
            margin-top: 5px;
        }
        label[for="Climbbutton1"] {
            margin-top: 5px;
        }
        label[for="Sackgassebutton1"] {
            margin-top: 5px;
        }
        label[for="Passbutton2"] {
            margin-top: 5px;
        }
        label[for="Climbbutton2"] {
            margin-top: 5px;
        }
        label[for="Sackgassebutton2"] {
            margin-top: 5px;
        }
        #ITbutton2,
        #ITbutton1 {
            background-image: url('Images/IT.png');
        }
        #FRbutton2,
        #FRbutton1 {
            background-image: url('Images/FR.png');
        }
        #CHbutton2,
        #CHbutton1 {
            background-image: url('Images/CH.png');
        }
        #ATbutton2,
        #ATbutton1 {
            background-image: url('Images/AT.png');
            background-size: 130%;
        }
        #DEbutton2,
        #DEbutton1 {
            background-image: url('Images/DE.png');
            background-size: 170%;
        }
        #SLObutton2,
        #SLObutton1 {
            background-image: url('Images/SLO.png');
            background-size: 200%;
            background-position: 5% center;
        }
        #ESbutton2,
        #ESbutton1 {
            background-image: url('Images/ES.png');
            background-size: 120%;
        }
        #ANDbutton2,
        #ANDbutton1 {
            background-image: url('Images/AND.png');
        }
        .flag-icon {
            width: 20px;
            border-radius: 10%;
        }
        
        /* switch slider */
        .switch {
            display: inline-block;
            height: 17px;
            position: relative;
            width: 30px;
        }
        .switch input {
        display:none;
        }
        .switchslider {
        background-color: #ccc;
        bottom: 0;
        cursor: pointer;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        transition: .4s;
        }
        .switchslider:before {
        background-color: #fff;
        bottom: 2px;
        content: "";
        height: 13px;
        left: 2px;
        position: absolute;
        transition: .4s;
        width: 13px;
        }
        input:checked + .switchslider {
        background-color: #66bb6a;
        }
        input:checked + .switchslider:before {
        transform: translateX(13px);
        }
        .switchslider.round {
        border-radius: 17px;
        }
        .switchslider.round:before {
        border-radius: 50%;
        }

        /* range slider */
        .range-slider {
            -webkit-appearance: none;
            appearance: none;
            margin-left: 10px;
            width: 160px;
            height: 10px;
            background-color: #ccc;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            height: 16px;
            width: 16px;
            border: 0px solid #D9D9D9;
            border-radius: 50%;
            background: #FFF;
            cursor: default;
            box-shadow: inset 0 0 1px #FFF, inset 0 1px 7px #EBEBEB, 0 3px 6px -3px #BBB;
        }
        .rangeslider-value2,
        .rangeslider-value1 {
            width: 40px;
            text-align: center;
            margin-left: 1px;
            color: rgb(126, 121, 121);
            font-family: Helvetica, Arial, sans-serif;
        }

        /* dual slider */
        #heightSlider2,
        #heightSlider1 {
            width: 45%;
            margin-top: 1px;
            position: absolute;
            margin-left: 130px;
        }
        #lengthSlider2,
        #lengthSlider1 {
            width: 45%;
            margin-top: 1px;
            position: absolute;
            margin-left: 130px;
        }
        #elevationSlider2,
        #elevationSlider1 {
            width: 45%;
            margin-top: 1px;
            position: absolute;
            margin-left: 130px;
        }
        #slopeSlider2,
        #slopeSlider1 {
            width: 45%;
            margin-top: 1px;
            position: absolute;
            margin-left: 130px;
        }
        #minHeightSlider2,
        #minHeightSlider1 {
            position: absolute;
            margin-left: 80px;
        }
        #minLengthSlider2,
        #minLengthSlider1 {
            position: absolute;
            margin-left: 80px;
        }
        #minElevationSlider2,
        #minElevationSlider1 {
            position: absolute;
            margin-left: 80px;
        }
        #minSlopeSlider2,
        #minSlopeSlider1 {
            position: absolute;
            margin-left: 80px;
        }
        .noUi-horizontal .noUi-handle:before,
        .noUi-horizontal .noUi-handle:after {
            display: none;
        }
        .noUi-horizontal {
            height: 10px;
            margin-top: -30px;
        }
        .noUi-horizontal .noUi-handle {
            background-color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            right: -10px;
            top: -4px;
        }
        .noUi-handle {
            border: none;
        }
        .noUi-connect {
            background-color: lightblue;
        }
    </style>
    <!--------------------- add geoJSON files renamed to .js files here -------------------------------------->
    <!-------------------------------------------------------------------------------------------------------->
    <script src="passi.js"></script>
    <script src="Tracks/Valcava.js"></script>
    <script src="Tracks/Iseran.js"></script>
    <script src="Tracks/Zambla.js"></script>
    <script src="Tracks/Selvino.js"></script>
    <script src="Tracks/Ganda.js"></script>
    <script src="Tracks/Brianza.js"></script>
    <script src="Tracks/Ghisallo.js"></script>
    <script src="Tracks/Sormano.js"></script>
    <script src="Tracks/Valbrona.js"></script>
    <script src="Tracks/Madonnina.js"></script>
    <script src="Tracks/Primo.js"></script>
    <script src="Tracks/Montevecchia.js"></script>
    <script src="Tracks/Miragolo.js"></script>
    <script src="Tracks/Salmezza.js"></script>
    <script src="Tracks/Nespello.js"></script>
    <script src="Tracks/Culmine.js"></script>
    <script src="Tracks/Agueglio.js"></script>
    <script src="Tracks/Narro.js"></script>
    <script src="Tracks/Valvarrone.js"></script>
    <script src="Tracks/Marco.js"></script>
    <script src="Tracks/Berbenno.js"></script>
    <script src="Tracks/Fuipiano.js"></script>
    <script src="Tracks/Bura.js"></script>
    <script src="Tracks/Antonio.js"></script>
    <script src="Tracks/Balisio.js"></script>
    <script src="Tracks/Splugen.js"></script>
    <script src="Tracks/Bernardino.js"></script>
    <script src="Tracks/Maloja.js"></script>
    <script src="Tracks/Julier.js"></script>
    <script src="Tracks/Albula.js"></script>
    <script src="Tracks/Bernina.js"></script>
    <script src="Tracks/Vivione.js"></script>
    <script src="Tracks/Aprica.js"></script>
    <script src="Tracks/Crocedomini.js"></script>
    <script src="Tracks/Eira.js"></script>
    <script src="Tracks/Forcora.js"></script>
    <script src="Tracks/Foscagno.js"></script>
    <script src="Tracks/Furka.js"></script>
    <script src="Tracks/Gavia.js"></script>
    <script src="Tracks/Gottardo.js"></script>
    <script src="Tracks/GranBernard.js"></script>
    <script src="Tracks/Grimsel.js"></script>
    <script src="Tracks/Guspessa.js"></script>
    <script src="Tracks/Livigno.js"></script>
    <script src="Tracks/Lukmanier.js"></script>
    <script src="Tracks/Maniva.js"></script>
    <script src="Tracks/Marzio.js"></script>
    <script src="Tracks/Montecampione.js"></script>
    <script src="Tracks/Mortirolo.js"></script>
    <script src="Tracks/Neggia.js"></script>
    <script src="Tracks/Nufenen.js"></script>
    <script src="Tracks/Oberalp.js"></script>
    <script src="Tracks/Ofen.js"></script>
    <script src="Tracks/Presolana.js"></script>
    <script src="Tracks/Simplon.js"></script>
    <script src="Tracks/Stelvio.js"></script>
    <script src="Tracks/Susten.js"></script>
    <script src="Tracks/Tedesco.js"></script>
    <script src="Tracks/Tonale.js"></script>
    <script src="Tracks/Trivigno.js"></script>
    <script src="Tracks/Umbrail.js"></script>
    <script src="Tracks/Zeno.js"></script>
    <script src="Tracks/KitzHorn.js"></script>
    <script src="Tracks/Nivolet.js"></script>
    <script src="Tracks/Sudelfeld.js"></script>
    <script src="Tracks/Lavaze.js"></script>
    <script src="Tracks/Niger.js"></script>
    <script src="Tracks/Karer.js"></script>
    <script src="Tracks/Erbe.js"></script>
    <script src="Tracks/Furcia.js"></script>
    <script src="Tracks/TreCime.js"></script>
    <script src="Tracks/TreCroci.js"></script>
    <script src="Tracks/Sestriere.js"></script>
    <script src="Tracks/Sampeyre.js"></script>
    <script src="Tracks/Esischie.js"></script>
    <script src="Tracks/Fauniera.js"></script>
    <script src="Tracks/Pordoi.js"></script>
    <script src="Tracks/Sella.js"></script>
    <script src="Tracks/Gardena.js"></script>
    <script src="Tracks/Campolongo.js"></script>
    <script src="Tracks/Fedaia.js"></script>
    <script src="Tracks/Valparola.js"></script>
    <script src="Tracks/Falzarego.js"></script>
    <script src="Tracks/Giau.js"></script>
    <script src="Tracks/Duran.js"></script>
    <script src="Tracks/Staulanza.js"></script>
    <script src="Tracks/Pellegrino.js"></script>
    <script src="Tracks/Manghen.js"></script>
    <script src="Tracks/Brocon.js"></script>
    <script src="Tracks/Gobbera.js"></script>
    <script src="Tracks/Cereda.js"></script>
    <script src="Tracks/Valles.js"></script>
    <script src="Tracks/Klausen.js"></script>
    <script src="Tracks/Rolle.js"></script>
    <script src="Tracks/Scheidegg.js"></script>
    <script src="Tracks/Moosalp.js"></script>
    <script src="Tracks/CroixDeCoeur.js"></script>
    <script src="Tracks/Fluela.js"></script>
    <script src="Tracks/Finestre.js"></script>
    <script src="Tracks/Lys.js"></script>
    <script src="Tracks/BonetteCime.js"></script>
    <script src="Tracks/Bonette.js"></script>
    <script src="Tracks/Predil.js"></script>
    <script src="Tracks/Nassfeld.js"></script>
    <script src="Tracks/Ploecken.js"></script>
    <script src="Tracks/Staller.js"></script>
    <script src="Tracks/Brennero.js"></script>
    <script src="Tracks/Timmelsjoch.js"></script>
    <script src="Tracks/Valmara.js"></script>
    <script src="Tracks/Tende.js"></script>
    <script src="Tracks/Lombarde.js"></script>
    <script src="Tracks/Larche.js"></script>
    <script src="Tracks/Agnel.js"></script>
    <script src="Tracks/Montgenevre.js"></script>
    <script src="Tracks/Echelle.js"></script>
    <script src="Tracks/MontCenis.js"></script>
    <script src="Tracks/PetitBernard.js"></script>
    <script src="Tracks/Reschen.js"></script>
    <script src="Tracks/Avena.js"></script>
    <script src="Tracks/SanBarbara.js"></script>
    <script src="Tracks/SantaBarbara.js"></script>
    <script src="Tracks/Boldo.js"></script>
    <script src="Tracks/Borcola.js"></script>
    <script src="Tracks/Bordala.js"></script>
    <script src="Tracks/Brandenberg.js"></script>
    <script src="Tracks/Aune.js"></script>
    <script src="Tracks/Duft.js"></script>
    <script src="Tracks/Fittanze.js"></script>
    <script src="Tracks/Fugazze.js"></script>
    <script src="Tracks/Gerlos.js"></script>
    <script src="Tracks/Glaubenbielen.js"></script>
    <script src="Tracks/Grappa.js"></script>
    <script src="Tracks/Glockner.js"></script>
    <script src="Tracks/Edelweiss.js"></script>
    <script src="Tracks/KaiserFranzJosef.js"></script>
    <script src="Tracks/Jaufen.js"></script>
    <script src="Tracks/Kerschbaumer.js"></script>
    <script src="Tracks/Niederndorfer.js"></script>
    <script src="Tracks/Thurn.js"></script>
    <script src="Tracks/Pragel.js"></script>
    <script src="Tracks/Roncola.js"></script>
    <script src="Tracks/Rossfeld.js"></script>
    <script src="Tracks/Samerberg.js"></script>
    <script src="Tracks/Soelk.js"></script>
    <script src="Tracks/Sommo.js"></script>
    <script src="Tracks/Spitzing.js"></script>
    <script src="Tracks/Toerwang.js"></script>
    <script src="Tracks/Ursprung.js"></script>
    <script src="Tracks/Wolfgang.js"></script>
    <script src="Tracks/Xomo.js"></script>
    <script src="Tracks/Xon.js"></script>
    <script src="Tracks/Zoncolan.js"></script>
    <script src="Tracks/Zovo.js"></script>
    <script src="Tracks/Schiestlscharte.js"></script>
    <script src="Tracks/Kühtai.js"></script>
    <script src="Tracks/Dientner.js"></script>
    <script src="Tracks/Hirschbichl.js"></script>
    <script src="Tracks/CampoCarloMagno.js"></script>
    <script src="Tracks/TorriFraele.js"></script>
    <script src="Tracks/Vezzena.js"></script>
    <script src="Tracks/Ächerli.js"></script>
    <script src="Tracks/Bieler.js"></script>
    <script src="Tracks/Lein.js"></script>
    <script src="Tracks/Planches.js"></script>
    <script src="Tracks/Ibergeregg.js"></script>
    <script src="Tracks/Champex.js"></script>
    <script src="Tracks/Glaubenberg.js"></script>
    <script src="Tracks/Pillon.js"></script>
    <script src="Tracks/Mendola.js"></script>
    <script src="Tracks/Gampen.js"></script>
    <script src="Tracks/Sattelegg.js"></script>
    <script src="Tracks/ColDeLaCroix.js"></script>
    <script src="Tracks/Montets.js"></script>
    <script src="Tracks/Jaun.js"></script>
    <script src="Tracks/Riedberg.js"></script>
    <script src="Tracks/Oberjoch.js"></script>
    <script src="Tracks/AmmerSattel.js"></script>
    <script src="Tracks/Flexen.js"></script>
    <script src="Tracks/Furkajoch.js"></script>
    <script src="Tracks/Hochtannberg.js"></script>
    <script src="Tracks/Faschinajoch.js"></script>
    <script src="Tracks/Losenpass.js"></script>
    <script src="Tracks/Buchener.js"></script>
    <script src="Tracks/Hahntennjoch.js"></script>
    <script src="Tracks/Fernpass.js"></script>
    <script src="Tracks/Iselsberg.js"></script>
    <script src="Tracks/Seefeld.js"></script>
    <script src="Tracks/Arlberg.js"></script>
    <script src="Tracks/Gaichtpass.js"></script>
    <script src="Tracks/Lienbachsattel.js"></script>
    <script src="Tracks/Gschütt.js"></script>
    <script src="Tracks/Walleralm.js"></script>
    <script src="Tracks/Feldbergpass.js"></script>
    <script src="Tracks/Kandel.js"></script>
    <script src="Tracks/Schauinsland.js"></script>
    <script src="Tracks/Rinken.js"></script>
    <script src="Tracks/Hohtann.js"></script>
    <script src="Tracks/Dürreck.js"></script>
    <script src="Tracks/Grän.js"></script>
    <script src="Tracks/ÄulemerKreuz.js"></script>
    <script src="Tracks/Notschrei.js"></script>
    <script src="Tracks/Rohrmoos.js"></script>
    <script src="Tracks/Ellegg.js"></script>
    <script src="Tracks/WidiwanderEck.js"></script>
    <script src="Tracks/Kreuzweg.js"></script>
    <script src="Tracks/Weissenbachsattel.js"></script>
    <script src="Tracks/Fürsatzhöhe.js"></script>
    <script src="Tracks/RotesKreuz.js"></script>
    <script src="Tracks/Dresselbach.js"></script>
    <script src="Tracks/Achenpass.js"></script>
    <script src="Tracks/Hochschwarzeck.js"></script>
    <script src="Tracks/Irschenberg.js"></script>
    <script src="Tracks/ErlerBerg.js"></script>
    <script src="Tracks/Galibier.js"></script>
    <script src="Tracks/Telegraphe.js"></script>
    <script src="Tracks/Izoard.js"></script>
    <script src="Tracks/Loze.js"></script>
    <script src="Tracks/Allos.js"></script>
    <script src="Tracks/Champs.js"></script>
    <script src="Tracks/Vars.js"></script>
    <script src="Tracks/CroixDeFer.js"></script>
    <script src="Tracks/Glandon.js"></script>
    <script src="Tracks/Lautaret.js"></script>
    <script src="Tracks/Turini.js"></script>
    <script src="Tracks/Huez.js"></script>
    <script src="Tracks/Sarenne.js"></script>
    <script src="Tracks/Madeleine.js"></script>
    <script src="Tracks/Roselend.js"></script>
    <script src="Tracks/Ventoux.js"></script>
    <script src="Tracks/JouxVerte.js"></script>
    <script src="Tracks/Pré.js"></script>
    <script src="Tracks/Kaunertal.js"></script>
    <script src="Tracks/Rettenbachferner.js"></script>
    <script src="Tracks/Tiefenbachferner.js"></script>
    <script src="Tracks/Eisentalhöhe.js"></script>
    <script src="Tracks/PenserJoch.js"></script>
    <script src="Tracks/Oschenik.js"></script>
    <script src="Tracks/PlanDuLac.js"></script>
    <script src="Tracks/Saisies.js"></script>
    <script src="Tracks/ValThorens.js"></script>
    <script src="Tracks/LacMoiry.js"></script>
    <script src="Tracks/Cayolle.js"></script>
    <script src="Tracks/Sanetsch.js"></script>
    <script src="Tracks/FinstertalerStausee.js"></script>
    <script src="Tracks/Tougnete.js"></script>
    <script src="Tracks/Naret.js"></script>
    <script src="Tracks/LacDuSaut.js"></script>
    <script src="Tracks/AlpeGalm.js"></script>
    <script src="Tracks/Männlichen.js"></script>
    <script src="Tracks/Täsch.js"></script>
    <script src="Tracks/Feselalp.js"></script>
    <script src="Tracks/RifugioForni.js"></script>
    <script src="Tracks/Mattmark.js"></script>
    <script src="Tracks/GrandeDixence.js"></script>
    <script src="Tracks/RifugioCinqueTorri.js"></script>
    <script src="Tracks/Tignes.js"></script>
    <script src="Tracks/BerghausNagens.js"></script>
    <script src="Tracks/Juf.js"></script>
    <script src="Tracks/LesArcs.js"></script>
    <script src="Tracks/Belpiano.js"></script>
    <script src="Tracks/Speikkogel.js"></script>
    <script src="Tracks/Arolla.js"></script>
    <script src="Tracks/ColSabot.js"></script>
    <script src="Tracks/Hochsölden.js"></script>
    <script src="Tracks/Martelltal.js"></script>
    <script src="Tracks/TauernmoosStausee.js"></script>
    <script src="Tracks/CollePreit.js"></script>
    <script src="Tracks/LaPlagne.js"></script>
    <script src="Tracks/Thyon.js"></script>
    <script src="Tracks/ColleSanCarlo.js"></script>
    <script src="Tracks/Mangrt.js"></script>
    <script src="Tracks/Bettmeralp.js"></script>
    <script src="Tracks/LesFonts.js"></script>
    <script src="Tracks/Partnun.js"></script>
    <script src="Tracks/AlpeGera.js"></script>
    <script src="Tracks/SaintVeran.js"></script>
    <script src="Tracks/Cheneil.js"></script>
    <script src="Tracks/PianRe.js"></script>
    <script src="Tracks/ValleeClaree.js"></script>
    <script src="Tracks/Dischmatal.js"></script>
    <script src="Tracks/Schnalstal.js"></script>
    <script src="Tracks/VenterTal.js"></script>
    <script src="Tracks/Cervinia.js"></script>
    <script src="Tracks/RiedbergZillertal.js"></script>
    <script src="Tracks/MelchbodenZillertal.js"></script>
    <script src="Tracks/Hintertux.js"></script>
    <script src="Tracks/Durone.js"></script>
    <script src="Tracks/Hochfügen.js"></script>
    <script src="Tracks/Zillergrund.js"></script>
    <script src="Tracks/Ballino.js"></script>
    <script src="Tracks/Reiterjoch.js"></script>
    <script src="Tracks/LagoMoulin.js"></script>
    <script src="Tracks/Platzwiesen.js"></script>
    <script src="Tracks/Hochstein.js"></script>
    <script src="Tracks/ColJoly.js"></script>
    <script src="Tracks/Jochgrimm.js"></script>
    <script src="Tracks/Aval.js"></script>
    <script src="Tracks/Zevrail.js"></script>
    <script src="Tracks/Mauvoisin.js"></script>
    <script src="Tracks/ValMare.js"></script>
    <script src="Tracks/Zermatt.js"></script>
    <script src="Tracks/Forclaz.js"></script>
    <script src="Tracks/Gueulaz.js"></script>
    <script src="Tracks/Giw.js"></script>
    <script src="Tracks/LaiDaNalps.js"></script>
    <script src="Tracks/ValSavarenche.js"></script>
    <script src="Tracks/Bormio.js"></script>
    <script src="Tracks/Safiental.js"></script>
    <script src="Tracks/Bisanne.js"></script>
    <script src="Tracks/Gardeccia.js"></script>
    <script src="Tracks/Lue.js"></script>
    <script src="Tracks/Silz.js"></script>
    <script src="Tracks/Sertigtal.js"></script>
    <script src="Tracks/Stallwieshof.js"></script>
    <script src="Tracks/LucknerHaus.js"></script>
    <script src="Tracks/LagoTeleccio.js"></script>
    <script src="Tracks/Luesens.js"></script>
    <script src="Tracks/Praxmar.js"></script>
    <script src="Tracks/Koelnbreinsperre.js"></script>
    <script src="Tracks/LangtaufenerTal.js"></script>
    <script src="Tracks/Ubaye.js"></script>
    <script src="Tracks/MadoneFenestre.js"></script>
    <script src="Tracks/Tannalp.js"></script>
    <script src="Tracks/Sulden.js"></script>
    <script src="Tracks/Craistas.js"></script>
    <script src="Tracks/Fouillouse.js"></script>
    <script src="Tracks/SeiserAlm.js"></script>
    <script src="Tracks/Ciampigotto.js"></script>
    <script src="Tracks/Lussari.js"></script>
    <script src="Tracks/Schoenfeldsattel.js"></script>
    <script src="Tracks/PassoPura.js"></script>
    <script src="Tracks/Turrach.js"></script>
    <script src="Tracks/Compet.js"></script>
    <script src="Tracks/FerretAosta.js"></script>
    <script src="Tracks/KienerAlm.js"></script>
    <script src="Tracks/Panarotta.js"></script>
    <script src="Tracks/SignalDeLure.js"></script>
    <script src="Tracks/Obertauern.js"></script>
    <script src="Tracks/Villach.js"></script>
    <script src="Tracks/Zumis.js"></script>
    <script src="Tracks/Castrin.js"></script>
    <script src="Tracks/Chamrousse.js"></script>
    <script src="Tracks/Chatillon.js"></script>
    <script src="Tracks/JouxPlane.js"></script>
    <script src="Tracks/AlpeTeglio.js"></script>
    <script src="Tracks/Tremalzo.js"></script>
    <script src="Tracks/Ayas.js"></script>
    <script src="Tracks/Couillole.js"></script>
    <script src="Tracks/Valberg.js"></script>
    <script src="Tracks/Guarda.js"></script>
    <script src="Tracks/Weinebene.js"></script>
    <script src="Tracks/ColNoyer.js"></script>
    <script src="Tracks/Panthaleon.js"></script>
    <script src="Tracks/PierreMoelle.js"></script>
    <script src="Tracks/Bondone.js"></script>
    <script src="Tracks/DeuxAlpes.js"></script>
    <script src="Tracks/Ftan.js"></script>
    <script src="Tracks/Klippitz.js"></script>
    <script src="Tracks/ColDeJouxAosta.js"></script>
    <script src="Tracks/Katschberg.js"></script>
    <script src="Tracks/Mollard.js"></script>
    <script src="Tracks/KreuzbergComelico.js"></script>
    <script src="Tracks/MittelbergJaun.js"></script>
    <script src="Tracks/PlateauMoliere.js"></script>
    <script src="Tracks/Tzecore.js"></script>
    <script src="Tracks/AlpeBernardo.js"></script>
    <script src="Tracks/Baldo.js"></script>
    <script src="Tracks/Colombiere.js"></script>
    <script src="Tracks/PuyRichard.js"></script>
    <script src="Tracks/Vrsic.js"></script>
    <script src="Tracks/Gurnigel.js"></script>
    <script src="Tracks/Panider.js"></script>
    <script src="Tracks/ColettaSalse.js"></script>
    <script src="Tracks/Grosssee.js"></script>
    <script src="Tracks/Hochwurtenspeicher.js"></script>
    <script src="Tracks/Granon.js"></script>
    <script src="Tracks/Moutiere.js"></script>
    <script src="Tracks/Oberaarsee.js"></script>
    <script src="Tracks/EttalerSattel.js"></script>
    <script src="Tracks/Griessenpass.js"></script>
    <script src="Tracks/CroceSalven.js"></script>
    <script src="Tracks/Passaboche.js"></script>
    <script src="Tracks/SanFermo.js"></script>
    <script src="Tracks/MariaEck.js"></script>
    <script src="Tracks/Maserer.js"></script>
    <script src="Tracks/Niklasreuth.js"></script>
    <script src="Tracks/Rossmettlen.js"></script>
    <script src="Tracks/ValBavona.js"></script>
    <script src="Tracks/Generoso.js"></script>
    <script src="Tracks/ValMuggio.js"></script>
    <script src="Tracks/AlpeGiumelloComo.js"></script>
    <script src="Tracks/Schäftlarn.js"></script>
    <script src="Tracks/Ludwigshöhe.js"></script>
    <script src="Tracks/Aufkirchen.js"></script>
    <script src="Tracks/Leutstetten.js"></script>
    <script src="Tracks/HochbergChiemgau.js"></script>
    <script src="Tracks/BichlPass.js"></script>
    <script src="Tracks/Riedl.js"></script>
    <script src="Tracks/Eibsee.js"></script>
    <script src="Tracks/Kesselberg.js"></script>
    <script src="Tracks/Matajur.js"></script>
    <script src="Tracks/Tourmalet.js"></script>
    <script src="Tracks/Pailheres.js"></script>
    <script src="Tracks/Ordino.js"></script>
    <script src="Tracks/Soulor.js"></script>
    <script src="Tracks/Aspin.js"></script>
    <script src="Tracks/Aubisque.js"></script>
    <script src="Tracks/Peyresourd.js"></script>
    <script src="Tracks/Mente.js"></script>
    <script src="Tracks/PortetAspet.js"></script>
    <script src="Tracks/Agnes.js"></script>
    <script src="Tracks/MarieBlanque.js"></script>
    <script src="Tracks/Lers.js"></script>
    <script src="Tracks/Envalira.js"></script>
    <script src="Tracks/Portillon.js"></script>
    <script src="Tracks/Jau.js"></script>
    <script src="Tracks/Bales.js"></script>
    <script src="Tracks/Core.js"></script>
    <script src="Tracks/PierreMartin.js"></script>
    <script src="Tracks/Arcalis.js"></script>
    <script src="Tracks/Imperatore.js"></script>
    <script src="Tracks/Blockhaus.js"></script>
    <script src="Tracks/Lenzerheide.js"></script>
    <script src="Tracks/Tivo.js"></script>
    <script src="Tracks/Coe.js"></script>
    <script src="Tracks/Valbona.js"></script>
    <script src="Tracks/Bonaigua.js"></script>
    <!-------------------------------------------------------------------------------------------------------->
    <!-------------------------------------------------------------------------------------------------------->
</head>
<body>
    <div id = "map"></div> 

    <div id="custom-close-button" class="custom-close-button" onclick="closeElevationProfile()">✕</div>

    <div id="filter1-toggle">Filter</div>
    <div id="filter1" style="display: none;">
        <div id="button-container">
            <label for="Passbutton1">Pass</label>
            <button id="Passbutton1" class="round-button"></button>
            <label for="Climbbutton1">Anstieg</label>
            <button id="Climbbutton1" class="round-button"></button>
            <label for="Sackgassebutton1">Sackgasse</label>
            <button id="Sackgassebutton1" class="round-button"></button>
        </div>
        <hr class="separator-line">
        <div id="button-container">
            <button id="ITbutton1" class="round-button"></button>
            <button id="FRbutton1" class="round-button"></button>
            <button id="CHbutton1" class="round-button"></button>
            <button id="ATbutton1" class="round-button"></button>
            <button id="DEbutton1" class="round-button"></button>
            <button id="SLObutton1" class="round-button"></button>
            <button id="ESbutton1" class="round-button"></button>
            <button id="ANDbutton1" class="round-button"></button>
        </div>
        <hr class="separator-line">
        <div class="filter-row">
            <label for="heightSlider1">Höhe:</label>
            <span id="minHeightSlider1">0 m</span>
            <div id="heightSlider1"></div>
            <span id="maxHeightSlider1">3000 m</span>
        </div>
        <div class="filter-row">
            <label for="lengthSlider1">Länge:</label>
            <span id="minLengthSlider1">0 km</span>
            <div id="lengthSlider1"></div>
            <span id="maxLengthSlider1">60 km</span>
        </div>
        <div class="filter-row">
            <label for="elevationSlider1">Höhenmeter:</label>
            <span id="minElevationSlider1">0 hm</span>
            <div id="elevationSlider1"></div>
            <span id="maxElevationSlider1">2500 hm</span>
        </div>
        <div class="filter-row">
            <label for="slopeSlider1">Steigung:</label>
            <span id="minSlopeSlider1">0 %</span>
            <div id="slopeSlider1"></div>
            <span id="maxSlopeSlider1">15 %</span>
        </div>
        <hr class="separator-line">
        <div class="filter-row">
            <label class="radius-slider1">In der Nähe:</label>
            <input type="range" id="rangeSlider1" min="0" max="200" value = "0" class="range-slider">
            <div class="rangeslider-value1">&#8212</div>
        </div>
        <hr class="separator-line">
        <div class="filter-row">
            <div class="container">
                <label class="switch" for="switchslider1">
                  <input type="checkbox" id="switchslider1" />
                  <div class="switchslider round"></div>
                </label>
            </div>
            <button id="resetFilter1">Zurücksetzen</button>
            <button id="applyFilter1">Anwenden</button>
        </div>
    </div>

    <div id="table-toggle">Liste</div>
    <div id="table-container" style="display: none;">
        <div class="sort-container">
            <label for="sort-options">Sortieren:</label>
            <select id="sort-options">
                <option value="empty"> </option>
                <option value="alphabetical">Alphabetisch</option>
                <option value="country">Land</option>
                <option value="height">Höhe</option>
                <option value="length">Länge</option>
                <option value="elevation">Höhenmeter</option>
                <option value="slope">Steigung</option>
            </select>
            <button id="toggle-sort-order" onclick="toggleSortOrder()">↑↓</button>
            <div class="container">
                <label class="switch" for="switchslider2">
                  <input type="checkbox" id="switchslider2" />
                  <div class="switchslider round"></div>
                </label>
            </div>
            <button id="select-all" onclick="selectAll()">Alle</button>
            <button id="deselect-all" onclick="deselectAll()">Aufheben</button>
            <button id="filter2-toggle" onclick="tableFilterToggle()">Filter</button>
            <div id="search-container">
                <input type="text" id="search-input" list="suggestions" placeholder="Suche..." oninput="searchTable()">
                <button id="clear-search" onclick="clearSearch()">✕</button>
                <datalist id="suggestions"></datalist>
            </div>
        </div>
        <table id="data-table">
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th>Name</th>
                    <th>Land</th>
                    <th>Höhe</th>
                    <th>Länge</th>
                    <th>Höhenmeter</th>
                    <th>Steigung</th>
                </tr>
            </thead>
            <tbody id="data-body"></tbody>
        </table>
    </div>

    <div id="filter2" style="display: none;">
        <div id="button-container">
            <label for="Passbutton2">Pass</label>
            <button id="Passbutton2" class="round-button"></button>
            <label for="Climbbutton2">Anstieg</label>
            <button id="Climbbutton2" class="round-button"></button>
            <label for="Sackgassebutton2">Sackgasse</label>
            <button id="Sackgassebutton2" class="round-button"></button>
        </div>
        <hr class="separator-line">
        <div id="button-container">
            <button id="ITbutton2" class="round-button"></button>
            <button id="FRbutton2" class="round-button"></button>
            <button id="CHbutton2" class="round-button"></button>
            <button id="ATbutton2" class="round-button"></button>
            <button id="DEbutton2" class="round-button"></button>
            <button id="SLObutton2" class="round-button"></button>
            <button id="ESbutton2" class="round-button"></button>
            <button id="ANDbutton2" class="round-button"></button>
        </div>
        <hr class="separator-line">
        <div class="filter-row">
            <label for="heightSlider2">Höhe:</label>
            <span id="minHeightSlider2">0 m</span>
            <div id="heightSlider2"></div>
            <span id="maxHeightSlider2">3000 m</span>
        </div>
        <div class="filter-row">
            <label for="lengthSlider2">Länge:</label>
            <span id="minLengthSlider2">0 km</span>
            <div id="lengthSlider2"></div>
            <span id="maxLengthSlider2">60 km</span>
        </div>
        <div class="filter-row">
            <label for="elevationSlider2">Höhenmeter:</label>
            <span id="minElevationSlider2">0 hm</span>
            <div id="elevationSlider2"></div>
            <span id="maxElevationSlider2">2500 hm</span>
        </div>
        <div class="filter-row">
            <label for="slopeSlider2">Steigung:</label>
            <span id="minSlopeSlider2">0 %</span>
            <div id="slopeSlider2"></div>
            <span id="maxSlopeSlider2">15 %</span>
        </div>
        <hr class="separator-line">
        <div class="filter-row">
            <label class="radius-slider2">In der Nähe:</label>
            <input type="range" id="rangeSlider2" min="0" max="200" value = "0" class="range-slider">
            <div class="rangeslider-value2">&#8212</div>
        </div>
        <hr class="separator-line">
        <div class="filter-row">
            <button id="resetFilter2">Zurücksetzen</button>
            <button id="applyFilter2">Anwenden</button>
        </div>
    </div>
    <div id="textbox" class="elevationprofile-textbox" style="display: none;"></div>

    <script>
        //localStorage.clear();

        //https counter
        function countHttpsOccurrences(passi) {
            const passiString = JSON.stringify(passi);
            const httpsOccurrences = (passiString.match(/"https/g) || []).length;
            return httpsOccurrences;
        }
        const numberOfHttpOccurrences = countHttpsOccurrences(passi);

        //initial view
        var map = L.map('map', {
            minZoom: 2,
            zoomControl: false
        }).setView([45.464664, 9.188540],13);

        //zoom
        L.control.zoom({
            position: 'bottomright'
        }).addTo(map);

        //scale
        L.control.scale({
            metric: true,
            imperial: false,
            maxwidth: 100,
            position: 'bottomleft'
        }).addTo(map);

        //location
        var lat = 45.484741239199046;
        var lng = 9.221152379797923;
        var locateControl = L.control.locate().addTo(map);
        map.on('locationfound', function (e) {
            var latlng = e.latlng;
            lat = latlng.lat;
            lng = latlng.lng;
        });

        //geo search
        var geoSearch = L.Control.geocoder({
            defaultMarkGeocode: false,
            position: "topleft",
            placeholder: "Suche...",
        }).on('markgeocode', function(e) {
            var bbox = e.geocode.bbox;
            var poly = L.polygon([
                bbox.getSouthEast(),
                bbox.getNorthEast(),
                bbox.getNorthWest(),
                bbox.getSouthWest()
            ]);
            map.fitBounds(poly.getBounds());
        }).addTo(map);

        //maps
        var osm = L.tileLayer('https://api.maptiler.com/maps/basic-v2/{z}/{x}/{y}.png?key=5oOhPnaZPwb4EiDFpWyW', {
            attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a> | <a> '+ numberOfHttpOccurrences +' climbs inluded </a>'
        }).addTo(map);
        var satellite = L.tileLayer('https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key=5oOhPnaZPwb4EiDFpWyW', {
            attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a> | <a> '+ numberOfHttpOccurrences +' climbs inluded </a>'
        });
        var topo = L.tileLayer('https://api.maptiler.com/maps/topo-v2/{z}/{x}/{y}.png?key=5oOhPnaZPwb4EiDFpWyW', {
            attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a> | <a> '+ numberOfHttpOccurrences +' climbs inluded </a>'
        });

        //elevation profile
        var elevation_options = {
            theme: "lightblue-theme",       // Default chart colors: theme lime-theme, magenta-theme, ...
            detached: true,                 // Chart container outside/inside map container
            elevationDiv: "#elevation-div", // if (detached), the elevation chart container
            autohide: false,                // if (!detached) autohide chart profile on chart mouseleave
            collapsed: true,                // if (!detached) initial state of chart profile control
            controlButton: false,           // if (!detached) control position on one of map corners
            position: "topright",           // Toggle close icon visibility
            closeBtn: true,                 // Autoupdate map center on chart mouseover
            followMarker: true,             // Autoupdate map bounds on chart update
            autofitBounds: true,            // Chart distance/elevation units
            imperial: false,                // [Lat, Long] vs [Long, Lat] points. (leaflet default: [Lat, Long])
            reverseCoords: false,           // Acceleration chart profile: true || "summary" || "disabled" || false
            acceleration: false,            // Slope chart profile: true || "summary" || "disabled" || false
            slope: false,                   // Speed chart profile: true || "summary" || "disabled" || false
            speed: false,                   // Altitude chart profile: true || "summary" || "disabled" || false
            altitude: true,                 // Display time info: true || "summary" || false
            time: false,                    // Display distance info: true || "summary" || false
            distance: true,                 // Summary track info style: "inline" || "multiline" || false
            summary: false,                 // Download link: "link" || false || "modal"
            downloadLink: false,            // Toggle chart ruler filter
            ruler: false,                   // Toggle chart legend filter
            legend: false,                  // Toggle "leaflet-almostover" integration
            almostOver: true,               // Toggle "leaflet-distance-markers" integration
            distanceMarkers: false,         // Toggle "leaflet-edgescale" integration
            edgeScale: false,               // Toggle "leaflet-hotline" integration
            hotline: true,                  // Display track datetimes: true || false
            timestamps: false,              // Display track waypoints: true || "markers" || "dots" || false
            waypoints: false,               // Toggle custom waypoint icons: true || { associative array of <sym> tags } || false
            wptIcons: {
                '': L.divIcon({
                className: 'elevation-waypoint-marker',
                html: '<i class="elevation-waypoint-icon"></i>',
                iconSize: [30, 30],
                iconAnchor: [8, 30],
                }),
            },
            wptLabels: false,               // Toggle waypoint labels: true || "markers" || "dots" || false
            preferCanvas: true,             // Render chart profiles as Canvas or SVG Paths
        };

        var controlElevation = L.control.elevation(elevation_options).addTo(map);
        const closeButton = document.getElementById('custom-close-button');
        closeButton.style.display = 'none';
        var isElevationExpanded = false;
  
        function closeElevationProfile(){
            document.querySelector('.elevation-toggle-icon').click();
            const closeButton = document.getElementById('custom-close-button');
            closeButton.style.display = 'none';
            isElevationExpanded = false;

            const textbox = document.querySelector('.textbox-content');
            textbox.style.display = 'none';
        }

        //list
        const tableToggle = document.getElementById("table-toggle");
        const table = document.getElementById("table-container");
        const dataBody = document.getElementById("data-body");
        const sortDropdown = document.getElementById("sort-options");
        const switchSlider2 = document.getElementById("switchslider2");
        
        var slider2 = false;

        switchSlider2.addEventListener("change", function() {
            slider2 = switchSlider2.checked;
        });

        tableToggle.addEventListener("click", function() {
            if (table.style.display === "none" || table.style.display === "") {
                table.style.display = "block";
            } else {
                table.style.display = "none";
                filter2.style.display = "none";
            }
        });

        sortDropdown.addEventListener("change", function() {
            if (sortDropdown.value === "alphabetical") {
                sortAlphabetically(2);
            } else if (sortDropdown.value === "country") {
                sortTableCountry();
            } else if (sortDropdown.value === "height") {
                const rows = Array.from(dataBody.querySelectorAll("tr"));
                rows.sort(sortNumeric(4));
                rows.forEach((row) => dataBody.appendChild(row));
            } else if (sortDropdown.value === "length") {
                const rows = Array.from(dataBody.querySelectorAll("tr"));
                rows.sort(sortNumeric(5));
                rows.forEach((row) => dataBody.appendChild(row));
            } else if (sortDropdown.value === "elevation") {
                const rows = Array.from(dataBody.querySelectorAll("tr"));
                rows.sort(sortNumeric(6));
                rows.forEach((row) => dataBody.appendChild(row));
            } else if (sortDropdown.value === "slope") {
                const rows = Array.from(dataBody.querySelectorAll("tr"));
                rows.sort(sortNumeric(7));
                rows.forEach((row) => dataBody.appendChild(row));
            } else if (sortDropdown.value === "empty") {
                sortRandom();
            }
        });

        function toggleSortOrder() {
            const table = document.getElementById("data-table");
            const tbody = table.querySelector("tbody");
            const rows = Array.from(tbody.querySelectorAll("tr"));
            rows.reverse();
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }
            rows.forEach((row) => tbody.appendChild(row));
        }

        function sortAlphabetically(columnIndex) {
            const table = document.getElementById("data-table");
            const tbody = table.querySelector("tbody");
            const rows = Array.from(tbody.querySelectorAll("tr"));
            rows.sort((a, b) => {
                const valueA = a.cells[columnIndex].textContent.trim();
                const valueB = b.cells[columnIndex].textContent.trim();
                return valueA.localeCompare(valueB);
            });
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }
            rows.forEach((row) => tbody.appendChild(row));
        }

        function sortTableCountry() {
            const table = document.getElementById("data-table");
            const tbody = table.querySelector("tbody");
            const rows = Array.from(tbody.querySelectorAll("tr"));
            rows.sort((a, b) => {
                const countryA = a.cells[3].dataset.country || a.cells[3].textContent.trim();
                const countryB = b.cells[3].dataset.country || b.cells[3].textContent.trim();
                const nameA = a.cells[2].textContent.trim();
                const nameB = b.cells[2].textContent.trim();
                const countryComparison = countryA.localeCompare(countryB);
                if (countryComparison === 0) {
                    return nameA.localeCompare(nameB);
                }
                return countryComparison;
            });
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }
            rows.forEach((row) => tbody.appendChild(row));
        }

        function sortNumeric(columnIndex) {
            return function(a, b) {
                const valueA = parseFloat(a.cells[columnIndex].textContent.trim());
                const valueB = parseFloat(b.cells[columnIndex].textContent.trim());
                return valueB - valueA;
            };
        }

        function sortRandom() {
            const table = document.getElementById("data-table");
            const tbody = table.querySelector("tbody");
            const rows = Array.from(tbody.querySelectorAll("tr"));
            rows.sort(() => Math.random() - 0.5);
            while (tbody.firstChild) {
                tbody.removeChild(tbody.firstChild);
            }
            rows.forEach((row) => tbody.appendChild(row));
        }

        function createRow(idd, name, country, height, length, elevation, slope, additionalInfoArray, link) {
            const tableRow = document.createElement("tr");

            const buttonCell = document.createElement("td");
            const button = document.createElement("button");
            button.className = "eye-button";
            const buttonId = `button${idd}`;
            button.setAttribute("id", buttonId);
            button.addEventListener("click", function () {
                checkboxCallback(idd, !button.classList.contains("active"));
                button.classList.toggle("active");
                if (button.classList.contains("active")) {
                    focusOnGeoJSONElement(idd, event.isTrusted);
                    button.style.backgroundImage = "url('Images/eye.png')"; 
                } else {
                    button.style.backgroundImage = "url('Images/hidden.png')"; // Replace with the path to your inactive image
                }
            });
            buttonCell.appendChild(button);
            tableRow.appendChild(buttonCell);

            const pngCell = document.createElement('td');
            const pngImage = document.createElement('img');
            const tickedValue = localStorage.getItem(`TickedCheckboxState${idd}`);
            const tickedImagePath = tickedValue !== null && JSON.parse(tickedValue) ? 'Images/ticked.png' : 'Images/Empty.png';
            pngImage.src = tickedImagePath;
            pngImage.width = 10;
            pngImage.height = 10;
            pngCell.appendChild(pngImage);
            tableRow.appendChild(pngCell);

            const nameCell = document.createElement("td");
            const nameLink = document.createElement("a");
            nameLink.href = link;
            nameLink.target = "_blank";
            nameLink.textContent = name;
            nameLink.style.textDecoration = "underline";
            nameLink.style.color = "inherit";
            nameCell.appendChild(nameLink);
        
            const showMoreButton = document.createElement("div");
            showMoreButton.textContent = "mehr";
            showMoreButton.className = "show-more-button";
            showMoreButton.onclick = function () {
                toggleAdditionalInfo(nameCell, additionalInfoArray);
            };
            nameCell.appendChild(showMoreButton);
            tableRow.appendChild(nameCell);
        
            const countryCell = document.createElement("td");
            const flagImg = document.createElement("img");
            switch (country) {
                case "IT": flagImg.src = "Images/IT.png"; break;
                case "FR": flagImg.src = "Images/FR.png"; break;
                case "CH": flagImg.src = "Images/CH.png"; break;
                case "AT": flagImg.src = "Images/AT.png"; break;
                case "DE": flagImg.src = "Images/DE.png"; break;
                case "SLO": flagImg.src = "Images/SLO.png"; break;
                case "ES": flagImg.src = "Images/ES.png"; break;
                case "AND": flagImg.src = "Images/AND.png"; break;
                default: countryCell.textContent = country; break;
            }
            flagImg.classList.add("flag-icon");
            countryCell.appendChild(flagImg);
            countryCell.dataset.country = country;
            tableRow.appendChild(countryCell);
        
            const heightCell = document.createElement("td");
            heightCell.textContent = height + ' m';
            tableRow.appendChild(heightCell);
        
            const lengthCell = document.createElement("td");
            lengthCell.textContent = length + ' km';
            tableRow.appendChild(lengthCell);
        
            const elevationCell = document.createElement("td");
            elevationCell.textContent = elevation + ' hm';
            tableRow.appendChild(elevationCell);
        
            const slopeCell = document.createElement("td");
            slopeCell.textContent = slope + ' %';
            tableRow.appendChild(slopeCell);
        
            return tableRow;
        }
        
        function toggleAdditionalInfo(container, additionalInfoArray) {
            const row = container.closest("tr");
            const newRow = row.cloneNode();
            newRow.classList.add('additional-info-row');
            const newCell = document.createElement("td");
            newCell.colSpan = row.cells.length;
            const newInfoContainer = document.createElement("div");
            newInfoContainer.className = "additional-info";

            additionalInfoArray.forEach(info => {
                const linkElement = document.createElement("a");
                linkElement.href = info[0];
                linkElement.target = "_blank";
                linkElement.textContent = info[1];
                linkElement.style.textDecoration = "underline";
                linkElement.style.color = "inherit";
                const paragraph = document.createElement("p");
                paragraph.appendChild(linkElement);
                const additionalText = document.createElement("span");
                additionalText.textContent = info[2];
                paragraph.appendChild(additionalText);
                newInfoContainer.appendChild(paragraph);
            });

            newCell.appendChild(newInfoContainer);
            newRow.appendChild(newCell);
            if (container.querySelector(".show-more-button").textContent === "mehr") {
                row.parentNode.insertBefore(newRow, row.nextSibling);
                container.querySelector(".show-more-button").textContent = "weniger"
            } else if (container.querySelector(".show-more-button").textContent === "weniger") {
                const addedRow = row.parentNode.querySelector('.additional-info-row');
                if (addedRow) {
                    row.parentNode.removeChild(addedRow);
                }
                container.querySelector(".show-more-button").textContent = "mehr";
            }
        }

        function selectAll() {
            const buttons = document.querySelectorAll(".eye-button");
            buttons.forEach(function (button) {
                if (!button.classList.contains("active")) {
                    button.click();
                }
            });
        }
        
        function deselectAll() {
            const buttons = document.querySelectorAll(".eye-button");
            buttons.forEach(function (button) {
                if (button.classList.contains("active")) {
                    button.click();
                }
            });
        }

        function searchTable() {
            const input = document.getElementById("search-input").value.toLowerCase();
            const rows = document.querySelectorAll("#data-table tbody tr");
            const suggestions = [];
            rows.forEach((row) => {
                const nameCell = row.querySelector("td:nth-child(3)");
                const name = nameCell.textContent.toLowerCase();
                const nameUpper = nameCell.textContent;
                const text = document.getElementById("search-input").value;
                const nameWithoutShowMore = name.replace('mehr', '');
                const nameWithoutShowMoreUpper = nameUpper.replace('mehr', '');
                if (nameWithoutShowMore.includes(input)) {
                    row.style.display = "";
                    if (nameWithoutShowMore !== input && text.length >= 1){
                        suggestions.push(nameWithoutShowMoreUpper);
                    }
                } else {
                    row.style.display = "none";
                }
            });
            updateSuggestions(suggestions);
        };

        function clearSearch() {
            document.getElementById("search-input").value = "";
            searchTable();
            updateSuggestions([]);
        }

        function updateSuggestions(suggestions) {
            const datalist = document.getElementById('suggestions');
            datalist.innerHTML = '';
            const limitedSuggestions = suggestions.slice(0, 5);
            limitedSuggestions.forEach((suggestion) => {
                const option = document.createElement('option');
                option.value = suggestion;
                datalist.appendChild(option);
            });
        }

        function focusOnGeoJSONElement(idd, isExternalClick) {
            const feature = passi.features.find(feature => feature.properties.idd === idd);
            if (feature) {
                const coordinates = feature.geometry.coordinates;
                const latLng = L.latLng(coordinates[1], coordinates[0]);
                if (isExternalClick) {
                    map.setView(latLng, 12);
                }
            }
        }

        //filter1
        const filter1 = document.getElementById("filter1");
        const filterButton1 = document.getElementById("filter1-toggle"); 
        const applyFilterButton1 = document.getElementById("applyFilter1");
        const resetFilterButton1 = document.getElementById("resetFilter1");
        const switchSlider1 = document.getElementById("switchslider1");
        const rangeSlider1 = document.getElementById('rangeSlider1');
        const sliderValue1 = document.querySelector('.rangeslider-value1');
        const heightSlider1 = document.getElementById("heightSlider1");
        const minHeightSpan1 = document.getElementById("minHeightSlider1");
        const maxHeightSpan1 = document.getElementById("maxHeightSlider1");
        const lengthSlider1 = document.getElementById("lengthSlider1");
        const minLengthSpan1 = document.getElementById("minLengthSlider1");
        const maxLengthSpan1 = document.getElementById("maxLengthSlider1");
        const elevationSlider1 = document.getElementById("elevationSlider1");
        const minElevationSpan1 = document.getElementById("minElevationSlider1");
        const maxElevationSpan1 = document.getElementById("maxElevationSlider1");
        const slopeSlider1 = document.getElementById("slopeSlider1");
        const minSlopeSpan1 = document.getElementById("minSlopeSlider1");
        const maxSlopeSpan1 = document.getElementById("maxSlopeSlider1");
        const Passbutton1 = document.getElementById("Passbutton1");
        const Climbbutton1 = document.getElementById("Climbbutton1");
        const Sackgassebutton1 = document.getElementById("Sackgassebutton1");
        const ITbutton1 = document.getElementById("ITbutton1");
        const FRbutton1 = document.getElementById("FRbutton1");
        const CHbutton1 = document.getElementById("CHbutton1");
        const ATbutton1 = document.getElementById("ATbutton1");
        const DEbutton1 = document.getElementById("DEbutton1");
        const SLObutton1 = document.getElementById("SLObutton1");
        const ESbutton1 = document.getElementById("ESbutton1");
        const ANDbutton1 = document.getElementById("ANDbutton1");


        var applyFilter1 = false;
        var FilterArray1 = [];
        var buttonPass1 = true;
        var buttonClimb1 = true;
        var buttonSackgasse1 = true;
        var buttonIT1 = false;
        var buttonFR1 = false;
        var buttonCH1 = false;
        var buttonAT1 = false;
        var buttonDE1 = false;
        var buttonSLO1 = false;
        var buttonAND1 = false;
        var buttonES1 = false;
        var slider1 = false;
        var range1 = 0;
        var activeControl1 = false;
        var [minHeight1, maxHeight1] = [0, 3000];
        var [minLength1, maxLength1] = [0, 60];
        var [minElevation1, maxElevation1] = [0, 2500];
        var [minSlope1, maxSlope1] = [0, 15];

        filterButton1.addEventListener("click", function() {
            if (filter1.style.display === "none" || filter1.style.display === "") {
                filter1.style.display = "block";
            } else {
                filter1.style.display = "none";
            }
        });

        switchSlider1.addEventListener("change", function() {
            slider1 = switchSlider1.checked;
        });

        rangeSlider1.addEventListener('input', function () {
            if (this.value < 1){
                sliderValue1.textContent = "—";
                activeControl1 = false;
                if (!activeControl1 && !activeControl2){
                    locateControl.stop();
                }
                range1 = 0;
            } else {
                sliderValue1.textContent = this.value + " km";
                if(!activeControl1 && !activeControl2){
                    locateControl.start();
                    activeControl1 = true
                }
                range1 = this.value;
            }
        });

        noUiSlider.create(heightSlider1, {
            start: [0, 3000],
            connect: true,
            range: {
                'min': 0,
                'max': 3000
            },
            step: 1,
        });
        heightSlider1.noUiSlider.on('update', function (values, handle) {
            [minHeight1, maxHeight1] = values.map(value => Math.round(value));
            minHeightSpan1.textContent = minHeight1 + ' m';
            maxHeightSpan1.textContent = maxHeight1 + ' m';
        });
        noUiSlider.create(lengthSlider1, {
            start: [0, 60],
            connect: true,
            range: {
                'min': 0,
                'max': 60
            },
            step: 0.5,
        });
        lengthSlider1.noUiSlider.on('update', function (values, handle) {
            [minLength1, maxLength1] = values.map(value => Math.round(value * 2) / 2);
            minLengthSpan1.textContent = minLength1 + ' km';
            maxLengthSpan1.textContent = maxLength1 + ' km';
        });
        noUiSlider.create(elevationSlider1, {
            start: [0, 2500],
            connect: true,
            range: {
                'min': 0,
                'max': 2500
            },
            step: 1,
        });
        elevationSlider1.noUiSlider.on('update', function (values, handle) {
            [minElevation1, maxElevation1] = values.map(value => Math.round(value));
            minElevationSpan1.textContent = minElevation1 + ' hm';
            maxElevationSpan1.textContent = maxElevation1 + ' hm';
        });
        noUiSlider.create(slopeSlider1, {
            start: [0, 15],
            connect: true,
            range: {
                'min': 0,
                'max': 15
            },
            step: 0.1,
        });
        slopeSlider1.noUiSlider.on('update', function (values, handle) {
            [minSlope1, maxSlope1] = values.map(value => Math.round(value * 10) / 10);
            minSlopeSpan1.textContent = minSlope1 + ' %';
            maxSlopeSpan1.textContent = maxSlope1 + ' %';
        });

        Passbutton1.addEventListener("click", function(){
            if(buttonPass1){
                buttonPass1 = false;
                this.style.backgroundImage = "url('Images/leer.png')";
            }else {
                buttonPass1 = true;
                this.style.backgroundImage = "url('Images/blau.png')";
            }
        });
        Climbbutton1.addEventListener("click", function(){
            if(buttonClimb1){
                buttonClimb1 = false;
                this.style.backgroundImage = "url('Images/leer.png')";
            }else {
                buttonClimb1 = true;
                this.style.backgroundImage = "url('Images/gelb.png')";
            }
        });
        Sackgassebutton1.addEventListener("click", function(){
            if(buttonSackgasse1){
                buttonSackgasse1 = false;
                this.style.backgroundImage = "url('Images/leer.png')";
            }else {
                buttonSackgasse1 = true;
                this.style.backgroundImage = "url('Images/rot.png')";
            }
        });

        ITbutton1.addEventListener("click", function(){
            if(buttonIT1){
                buttonIT1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonIT1 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        FRbutton1.addEventListener("click", function(){
            if(buttonFR1){
                buttonFR1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonFR1 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        CHbutton1.addEventListener("click", function(){
            if(buttonCH1){
                buttonCH1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonCH1 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        ATbutton1.addEventListener("click", function(){
            if(buttonAT1){
                buttonAT1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonAT1 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        DEbutton1.addEventListener("click", function(){
            if(buttonDE1){
                buttonDE1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonDE1 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        SLObutton1.addEventListener("click", function(){
            if(buttonSLO1){
                buttonSLO1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonSLO1= true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        ANDbutton1.addEventListener("click", function(){
            if(buttonAND1){
                buttonAND1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonAND1= true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        ESbutton1.addEventListener("click", function(){;
            if(buttonES1){
                buttonES1 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonES1= true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });

        applyFilterButton1.addEventListener("click", function() {
            applyFilter1 = true;
            filterButton1.style.color = "lightblue";
            FilterArray1[0] = buttonPass1;
            FilterArray1[1] = buttonClimb1;
            FilterArray1[2] = buttonSackgasse1;
            FilterArray1[3] = minHeight1;
            FilterArray1[4] = maxHeight1;
            FilterArray1[5] = minElevation1;
            FilterArray1[6] = maxElevation1;
            FilterArray1[7] = minLength1;
            FilterArray1[8] = maxLength1;
            FilterArray1[9] = minSlope1;
            FilterArray1[10] = maxSlope1;
            FilterArray1[11] = buttonIT1;
            FilterArray1[12] = buttonFR1;
            FilterArray1[13] = buttonCH1;
            FilterArray1[14] = buttonAT1;
            FilterArray1[15] = buttonDE1;
            FilterArray1[16] = buttonSLO1;
            FilterArray1[17] = buttonAND1;
            FilterArray1[18] = buttonES1;
            filter1.style.display = "none";
        });

        resetFilterButton1.addEventListener("click", function() {
            applyFilter1 = false;
            filterButton1.style.color = 'rgb(126, 121, 121)';
            heightSlider1.noUiSlider.reset();
            lengthSlider1.noUiSlider.reset();
            elevationSlider1.noUiSlider.reset();
            slopeSlider1.noUiSlider.reset();
            if(!buttonPass1){document.getElementById('Passbutton1').click()};
            if(!buttonClimb1){document.getElementById('Climbbutton1').click()};
            if(!buttonSackgasse1){document.getElementById('Sackgassebutton1').click()};
            if(buttonIT1){document.getElementById('ITbutton1').click()};
            if(buttonFR1){document.getElementById('FRbutton1').click()};
            if(buttonCH1){document.getElementById('CHbutton1').click()};
            if(buttonAT1){document.getElementById('ATbutton1').click()};
            if(buttonDE1){document.getElementById('DEbutton1').click()};
            if(buttonSLO1){document.getElementById('SLObutton1').click()};
            if(buttonAND1){document.getElementById('ANDbutton1').click()};
            if(buttonES1){document.getElementById('ESbutton1').click()};
            FilterArray1[0] = true;
            FilterArray1[1] = true;
            FilterArray1[2] = true;
            FilterArray1[3] = minHeight1;
            FilterArray1[4] = maxHeight1;
            FilterArray1[5] = minElevation1;
            FilterArray1[6] = maxElevation1;
            FilterArray1[7] = minLength1;
            FilterArray1[8] = maxLength1;
            FilterArray1[9] = minSlope1;
            FilterArray1[10] = maxSlope1;
            FilterArray1[11] = false;
            FilterArray1[12] = false;
            FilterArray1[13] = false;
            FilterArray1[14] = false;
            FilterArray1[15] = false;
            FilterArray1[16] = false;
            FilterArray1[17] = false;
            FilterArray1[18] = false;
            if(switchSlider1.checked){
                switchSlider1.click();
            }
            rangeSlider1.value = 0;
            range1 = 0;
            sliderValue1.textContent = "—";
            activeControl1 = false;
            filter1.style.display = "none";
        });
        resetFilterButton1.click();

        //filter2
        const filter2 = document.getElementById("filter2");
        const filterButton2 = document.getElementById('filter2-toggle');
        const applyFilterButton2 = document.getElementById("applyFilter2");
        const resetFilterButton2 = document.getElementById("resetFilter2");
        const Passbutton2 = document.getElementById("Passbutton2");
        const Climbbutton2 = document.getElementById("Climbbutton2");
        const Sackgassebutton2 = document.getElementById("Sackgassebutton2");
        const ITbutton2 = document.getElementById("ITbutton2");
        const FRbutton2 = document.getElementById("FRbutton2");
        const CHbutton2 = document.getElementById("CHbutton2");
        const ATbutton2 = document.getElementById("ATbutton2");
        const DEbutton2 = document.getElementById("DEbutton2");
        const SLObutton2 = document.getElementById("SLObutton2");
        const ESbutton2 = document.getElementById("ESbutton2");
        const ANDbutton2 = document.getElementById("ANDbutton2");
        const rangeSlider2 = document.getElementById('rangeSlider2');
        const sliderValue2 = document.querySelector('.rangeslider-value2');
        const heightSlider2 = document.getElementById("heightSlider2");
        const minHeightSpan2 = document.getElementById("minHeightSlider2");
        const maxHeightSpan2 = document.getElementById("maxHeightSlider2");
        const lengthSlider2 = document.getElementById("lengthSlider2");
        const minLengthSpan2 = document.getElementById("minLengthSlider2");
        const maxLengthSpan2 = document.getElementById("maxLengthSlider2");
        const elevationSlider2 = document.getElementById("elevationSlider2");
        const minElevationSpan2 = document.getElementById("minElevationSlider2");
        const maxElevationSpan2 = document.getElementById("maxElevationSlider2");
        const slopeSlider2 = document.getElementById("slopeSlider2");
        const minSlopeSpan2 = document.getElementById("minSlopeSlider2");
        const maxSlopeSpan2 = document.getElementById("maxSlopeSlider2");
        
        var applyFilter2 = false;
        var FilterArray2 = [];
        var buttonPass2 = true;
        var buttonClimb2 = true;
        var buttonSackgasse2 = true;
        var buttonIT2 = false;
        var buttonFR2 = false;
        var buttonCH2 = false;
        var buttonAT2 = false;
        var buttonDE2 = false;
        var buttonSLO2 = false;
        var buttonAND2 = false;
        var buttonES2 = false;
        var range2 = 0;
        var activeControl2 = false;
        var [minHeight2, maxHeight2] = [0, 3000];
        var [minLength2, maxLength2] = [0, 60];
        var [minElevation2, maxElevation2] = [0, 2500];
        var [minSlope2, maxSlope2] = [0, 15];

        function tableFilterToggle(){
            if (filter2.style.display === "none" || filter2.style.display === "") {
                filter2.style.display = "block";
            } else {
                filter2.style.display = "none";
            }
        };

        Passbutton2.addEventListener("click", function(){
            if(buttonPass2){
                buttonPass2 = false;
                this.style.backgroundImage = "url('Images/leer.png')";
            }else {
                buttonPass2 = true;
                this.style.backgroundImage = "url('Images/blau.png')";
            }
        });
        Climbbutton2.addEventListener("click", function(){
            if(buttonClimb2){
                buttonClimb2 = false;
                this.style.backgroundImage = "url('Images/leer.png')";
            }else {
                buttonClimb2 = true;
                this.style.backgroundImage = "url('Images/gelb.png')";
            }
        });
        Sackgassebutton2.addEventListener("click", function(){
            if(buttonSackgasse2){
                buttonSackgasse2 = false;
                this.style.backgroundImage = "url('Images/leer.png')";
            }else {
                buttonSackgasse2 = true;
                this.style.backgroundImage = "url('Images/rot.png')";
            }
        });

        ITbutton2.addEventListener("click", function(){
            if(buttonIT2){
                buttonIT2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonIT2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        FRbutton2.addEventListener("click", function(){
            if(buttonFR2){
                buttonFR2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonFR2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        CHbutton2.addEventListener("click", function(){
            if(buttonCH2){
                buttonCH2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonCH2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        ATbutton2.addEventListener("click", function(){
            if(buttonAT2){
                buttonAT2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonAT2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        DEbutton2.addEventListener("click", function(){
            if(buttonDE2){
                buttonDE2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonDE2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        SLObutton2.addEventListener("click", function(){
            if(buttonSLO2){
                buttonSLO2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonSLO2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        ANDbutton2.addEventListener("click", function(){
            if(buttonAND2){
                buttonAND2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonAND2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
        ESbutton2.addEventListener("click", function(){
            if(buttonES2){
                buttonES2 = false;
                this.style.borderColor = "rgb(126, 121, 121)";
                this.style.borderWidth = "1px"
            }else {
                buttonES2 = true;
                this.style.borderColor = "lightblue";
                this.style.borderWidth = "2px"
            }
        });
 
        rangeSlider2.addEventListener('input', function () {
            if (this.value < 1){
                sliderValue2.textContent = "—";
                activeControl2 = false;
                if (!activeControl1 && !activeControl2){
                    locateControl.stop();
                }
                range2 = 0;
            } else {
                sliderValue2.textContent = this.value + " km";
                if(!activeControl1 && !activeControl2){
                    locateControl.start();
                    activeControl2 = true
                }
                range2 = this.value;
            }
        });

        noUiSlider.create(heightSlider2, {
            start: [0, 3000],
            connect: true,
            range: {
                'min': 0,
                'max': 3000
            },
            step: 1,
        });
        heightSlider2.noUiSlider.on('update', function (values, handle) {
            [minHeight2, maxHeight2] = values.map(value => Math.round(value));
            minHeightSpan2.textContent = minHeight2 + ' m';
            maxHeightSpan2.textContent = maxHeight2 + ' m';
        });
        noUiSlider.create(lengthSlider2, {
            start: [0, 60],
            connect: true,
            range: {
                'min': 0,
                'max': 60
            },
            step: 0.5,
        });
        lengthSlider2.noUiSlider.on('update', function (values, handle) {
            [minLength2, maxLength2] = values.map(value => Math.round(value * 2) / 2);
            minLengthSpan2.textContent = minLength2 + ' km';
            maxLengthSpan2.textContent = maxLength2 + ' km';
        });
        noUiSlider.create(elevationSlider2, {
            start: [0, 2500],
            connect: true,
            range: {
                'min': 0,
                'max': 2500
            },
            step: 1,
        });
        elevationSlider2.noUiSlider.on('update', function (values, handle) {
            [minElevation2, maxElevation2] = values.map(value => Math.round(value));
            minElevationSpan2.textContent = minElevation2 + ' hm';
            maxElevationSpan2.textContent = maxElevation2 + ' hm';
        });
        noUiSlider.create(slopeSlider2, {
            start: [0, 15],
            connect: true,
            range: {
                'min': 0,
                'max': 15
            },
            step: 0.1,
        });
        slopeSlider2.noUiSlider.on('update', function (values, handle) {
            [minSlope2, maxSlope2] = values.map(value => Math.round(value * 10) / 10);
            minSlopeSpan2.textContent = minSlope2 + ' %';
            maxSlopeSpan2.textContent = maxSlope2 + ' %';
        });
        
        applyFilterButton2.addEventListener("click", function() {
            applyFilter2 = true;
            filterButton2.style.color = "lightblue";
            FilterArray2[0] = buttonPass2;
            FilterArray2[1] = buttonClimb2;
            FilterArray2[2] = buttonSackgasse2;
            FilterArray2[3] = minHeight2;
            FilterArray2[4] = maxHeight2;
            FilterArray2[5] = minElevation2;
            FilterArray2[6] = maxElevation2;
            FilterArray2[7] = minLength2;
            FilterArray2[8] = maxLength2;
            FilterArray2[9] = minSlope2;
            FilterArray2[10] = maxSlope2;
            FilterArray2[11] = buttonIT2;
            FilterArray2[12] = buttonFR2;
            FilterArray2[13] = buttonCH2;
            FilterArray2[14] = buttonAT2;
            FilterArray2[15] = buttonDE2;
            FilterArray2[16] = buttonSLO2;
            FilterArray2[17] = buttonAND2;
            FilterArray2[18] = buttonES2;
            filter2.style.display = "none";
        });

        resetFilterButton2.addEventListener("click", function() {
            applyFilter2 = false;
            filterButton2.style.color = 'rgb(126, 121, 121)';
            heightSlider2.noUiSlider.reset();
            lengthSlider2.noUiSlider.reset();
            elevationSlider2.noUiSlider.reset();
            slopeSlider2.noUiSlider.reset();
            if(!buttonPass2){document.getElementById('Passbutton2').click()};
            if(!buttonClimb2){document.getElementById('Climbbutton2').click()};
            if(!buttonSackgasse2){document.getElementById('Sackgassebutton2').click()};
            if(buttonIT2){document.getElementById('ITbutton2').click()};
            if(buttonFR2){document.getElementById('FRbutton2').click()};
            if(buttonCH2){document.getElementById('CHbutton2').click()};
            if(buttonAT2){document.getElementById('ATbutton2').click()};
            if(buttonDE2){document.getElementById('DEbutton2').click()};
            if(buttonSLO2){document.getElementById('SLObutton2').click()};
            if(buttonAND2){document.getElementById('ANDbutton2').click()};
            if(buttonES2){document.getElementById('ESbutton2').click()};
            FilterArray2[0] = true;
            FilterArray2[1] = true;
            FilterArray2[2] = true;
            FilterArray2[3] = minHeight2;
            FilterArray2[4] = maxHeight2;
            FilterArray2[5] = minElevation2;
            FilterArray2[6] = maxElevation2;
            FilterArray2[7] = minLength2;
            FilterArray2[8] = maxLength2;
            FilterArray2[9] = minSlope2;
            FilterArray2[10] = maxSlope2;
            FilterArray2[11] = false;
            FilterArray2[12] = false;
            FilterArray2[13] = false;
            FilterArray2[14] = false;
            FilterArray2[15] = false;
            FilterArray2[16] = false;
            FilterArray2[17] = false;
            FilterArray2[18] = false;
            rangeSlider2.value = 0;
            range2 = 0;
            sliderValue2.textContent = "—";
            activeControl2 = false;
            filter2.style.display = "none";
            document.getElementById("sort-options").value = "empty";
            clearSearch();
        });
        resetFilterButton2.click();

        //custom icons
        var yellowIcon = L.icon({
            iconUrl: 'Images/gelb.png',
            iconSize: [16, 16],
            iconAnchor: [8, 16],
            popupAnchor:  [0, -16]
        });
        var redIcon = L.icon({
            iconUrl: 'Images/rot.png',
            iconSize: [16, 16],
            iconAnchor: [8, 16], 
            popupAnchor:  [0, -16]
        });
        var blueIcon = L.icon({
            iconUrl: 'Images/blau.png',
            iconSize: [16, 16],
            iconAnchor: [8, 16], 
            popupAnchor:  [0, -16]
        });
        var searchIcon = L.icon({
            iconUrl: 'Images/Empty.png',
            iconSize: [0, 0],
            iconAnchor: [0, 0], 
            popupAnchor:  [0, 0]
        });
        var yellowTicked = L.icon({
            iconUrl: 'Images/gelbTicked.png',
            iconSize: [16, 16],
            iconAnchor: [8, 16],
            popupAnchor:  [0, -16]
        });
        var redTicked = L.icon({
            iconUrl: 'Images/rotTicked.png',
            iconSize: [16, 16],
            iconAnchor: [8, 16], 
            popupAnchor:  [0, -16]
        });
        var blueTicked = L.icon({
            iconUrl: 'Images/blauTicked.png',
            iconSize: [16, 16],
            iconAnchor: [8, 16], 
            popupAnchor:  [0, -16]
        });

        //markers and tracks
        const highestIDD = passi.features[passi.features.length - 1].properties.idd;
        var geoJSONArray = [];
        var geoJSONs = [];
        var marks = [];
        var markerTable = [];
        var trackTable = [];
        var markerStates = [];
        var markerStatesArray = [];
        var ix = 0;
        var latlngArray = [];
        var icons = [];
        var iconTemp = 0;

        var marker = L.geoJSON(passi, {
            pointToLayer: function (feature, latlng) {
                ix = feature.properties.idd;
                latlngArray[ix] = latlng;
                const storedValue = localStorage.getItem(`TickedCheckboxState${ix}`);
                let icon;
                if (storedValue && JSON.parse(storedValue)) {
                    if (feature.properties.category == 'Pass') {
                        icon = blueTicked;
                    } else if (feature.properties.category == 'Climb') {
                        icon = yellowTicked;
                    } else if (feature.properties.category == 'Sackgasse') {
                        icon = redTicked;
                    }
                } else {
                    if (feature.properties.category == 'Pass') {
                        icon = blueIcon;
                    } else if (feature.properties.category == 'Climb') {
                        icon = yellowIcon;
                    } else if (feature.properties.category == 'Sackgasse') {
                        icon = redIcon;
                    }
                }
                iconTemp =  L.marker(latlng, { icon: icon }).bindTooltip(feature.properties.name + ' (' + feature.properties.height + ' m)');
                icons[ix] = iconTemp;
                return iconTemp;
            },

            onEachFeature: function(feature, layer){
                ix = feature.properties.idd;
                const showRoutesCheckbox = document.createElement('input');
                showRoutesCheckbox.type = 'checkbox';
                showRoutesCheckbox.id = `MarkerCheckbox${ix}`;
                const showRoutesLabel = document.createElement('label');
                showRoutesLabel.htmlFor = `MarkerCheckbox${ix}`;
                showRoutesLabel.textContent = 'Anfahrten anzeigen';
                const markAsTickedCheckbox = document.createElement('input');
                markAsTickedCheckbox.type = 'checkbox';
                markAsTickedCheckbox.id = `TickedCheckbox${ix}`;
                const markAsTickedLabel = document.createElement('label');
                markAsTickedLabel.htmlFor = `TickedCheckbox${ix}`;
                markAsTickedLabel.textContent = 'Gemacht';
                const category = feature.properties.category;
                var categoryGerman = '';

                switch (category) {
                    case 'Pass': categoryGerman = 'Pass'; break;
                    case 'Climb': categoryGerman = 'Anstieg'; break;
                    case 'Sackgasse': categoryGerman = 'Sackgasse'; break;
                    default: categoryGerman = 'Unbekannt'; break;
                }
                
                layer.bindPopup('<div style="width: 135px;">' +
                    '<p style="line-height: 1; margin-bottom: 5px;"><a href="' + feature.properties.link + '" target="_blank">' + feature.properties.name + '</a></p><div style="background-color: lightgray; padding: 1px;">' + categoryGerman + '<span style="float: right;">' + feature.properties.height + ' m</span></div><div style="margin-top: 1px;">' +
                    showRoutesCheckbox.outerHTML + showRoutesLabel.outerHTML +
                    '<br>' +
                    markAsTickedCheckbox.outerHTML + markAsTickedLabel.outerHTML +
                    '</div>' + '</div>');
        
                layer.on('mouseover', function (e) {
                    ix = feature.properties.idd;
                    if (feature.properties.category == 'Pass'){
                        geoJSONArray[ix].setStyle({ color: 'darkblue' ,weight:'3'});
                    } else if (feature.properties.category == 'Climb'){
                        geoJSONArray[ix].setStyle({ color: 'orange' ,weight:'3'});
                    } else if (feature.properties.category == 'Sackgasse'){
                        geoJSONArray[ix].setStyle({ color: 'red' ,weight:'3'});
                    }
                });

                layer.on('mouseout', function (e) {
                    ix = feature.properties.idd;
                    if (feature.properties.category == 'Pass'){
                        if (markerStatesArray[ix]) {
                            geoJSONArray[ix].setStyle({ color: 'darkblue',weight:'3' });
                        } else {
                            geoJSONArray[ix].setStyle({ color: 'rgb(30,144,255)',weight:'1' });
                        }
                    } else if (feature.properties.category == 'Climb'){
                        if (markerStatesArray[ix]) {
                            geoJSONArray[ix].setStyle({ color: 'orange',weight:'3' });
                        } else {
                            geoJSONArray[ix].setStyle({ color: 'rgb(255,215,0)',weight:'1' });
                        }
                    } else if (feature.properties.category == 'Sackgasse'){
                        if (markerStatesArray[ix]) {
                            geoJSONArray[ix].setStyle({ color: 'red',weight:'3' });
                        } else {
                            geoJSONArray[ix].setStyle({ color: 'rgb(255,99,71)',weight:'1' });
                        }
                    }
                });

                layer.on('click', function (e) {
                    ix = feature.properties.idd;
                    this.openPopup;
                    var markerCheckbox = document.getElementById(`MarkerCheckbox${ix}`);
                    if (markerCheckbox) {
                        markerCheckbox.checked = markerStates[ix];
                        markerCheckbox.addEventListener('input', function (event) {
                            markerStatesArray[ix] = event.target.checked;
                            markerStates[ix] = event.target.checked; // Store the state in markerStates
                            if (feature.properties.category == 'Pass') {
                                if (markerStatesArray[ix]) {
                                    if (tracksCheckbox.checked){
                                        geoJSONArray[ix].setStyle({ color: 'darkblue', weight: '3' });
                                    } else {
                                        if (geoJSONArray[ix]){
                                            map.removeLayer(geoJSONArray[ix]);
                                        }
                                        geoJSONArray[ix].setStyle({ color: 'darkblue', weight: '3' }).addTo(map); // Change color
                                    }
                                } else {
                                    if (tracksCheckbox.checked){
                                        geoJSONArray[ix].setStyle({ color: 'rgb(30,144,255)', weight: '1' });
                                    } else {
                                        if (geoJSONArray[ix]){
                                            map.removeLayer(geoJSONArray[ix]);
                                        }
                                    }
                                }
                            } else if (feature.properties.category == 'Climb') {
                                if (markerStatesArray[ix]) {
                                    if (tracksCheckbox.checked){
                                        geoJSONArray[ix].setStyle({ color: 'orange', weight: '3' });
                                    } else {
                                        geoJSONArray[ix].setStyle({ color: 'orange', weight: '3' }).addTo(map); // Change color
                                    }
                                } else {
                                    if (tracksCheckbox.checked){
                                        geoJSONArray[ix].setStyle({ color: 'rgb(255,215,0)', weight: '1' });
                                    } else {
                                        map.removeLayer(geoJSONArray[ix]);
                                    }
                                }
                            } else if (feature.properties.category == 'Sackgasse') {
                                if (markerStatesArray[ix]) {
                                    if (tracksCheckbox.checked){
                                        geoJSONArray[ix].setStyle({ color: 'red', weight: '3' });
                                    } else {
                                        geoJSONArray[ix].setStyle({ color: 'red', weight: '3' }).addTo(map); // Change color
                                    }
                                } else {
                                    if (tracksCheckbox.checked){
                                        geoJSONArray[ix].setStyle({ color: 'rgb(255,99,71)', weight: '1' });
                                    } else {
                                        map.removeLayer(geoJSONArray[ix]);
                                    }
                                }
                            }
                        });
                    }

                    var tickedCheckbox = document.getElementById(`TickedCheckbox${ix}`);
                    if (tickedCheckbox) {
                        const storedValue = localStorage.getItem(`TickedCheckboxState${ix}`);
                        tickedCheckbox.checked = JSON.parse(storedValue);
                        tickedCheckbox.addEventListener('change', function () {
                            localStorage.setItem(`TickedCheckboxState${ix}`, JSON.stringify(this.checked));
                            let icon;
                            if (this.checked) {
                                if (feature.properties.category == 'Pass') {
                                    icon = blueTicked;
                                } else if (feature.properties.category == 'Climb') {
                                    icon = yellowTicked;
                                } else if (feature.properties.category == 'Sackgasse') {
                                    icon = redTicked;
                                }
                            } else {
                                if (feature.properties.category == 'Pass') {
                                    icon = blueIcon;
                                } else if (feature.properties.category == 'Climb') {
                                    icon = yellowIcon;
                                } else if (feature.properties.category == 'Sackgasse') {
                                    icon = redIcon;
                                }
                            }
                            icons[ix].setIcon(icon)

                            const checkboxes = document.getElementsByClassName('eye-button');
                            const checkboxValues = {};
                            var checkbox99idd = 0;
                            for (let i = 0; i < checkboxes.length; i++) {
                                const checkbox = checkboxes[i];
                                const checkbox99idd = checkbox.getAttribute('id').replace('button', ''); // Extract idd from the checkbox id
                                if (checkbox99idd !== null) {
                                    checkboxValues[checkbox99idd] = button.classList.contains("active");
                                }
                            }

                            resetFilterButton2.click();
                            
                            for (let i = 0; i < checkboxes.length; i++) {
                                if (checkboxValues[i]){
                                    const checkboxId = `button${i}`;
                                    const checkboxToClick = document.getElementById(checkboxId);
                                    checkboxToClick.click();
                                }
                            }
                        });
                    }
                });
            }
        });

        function geoJSONTrackSettings(feature, layer) {
            layer.bindTooltip(feature.properties.name + ' (' + feature.properties.length + ' km, ' + feature.properties.elevation + ' hm)');
            
            layer.on('click', function (e) {
                var closeButton = document.getElementById('custom-close-button');
                controlElevation.clear();
                controlElevation.addData(feature);
                if (!isElevationExpanded) {
                    document.querySelector('.elevation-toggle-icon').click();
                    isElevationExpanded = true;
                }
                closeButton.style.display = 'block';
                const iddToSearch = feature.properties.idd;
                const passName = getNameById(iddToSearch);
                var textbox = document.getElementById('textbox');
                textbox.innerHTML = `<p class="textbox-content"><span class="textbox-name">${passName}</span> - <a class="textbox-link" href="${feature.properties.link}" target="_blank">${feature.properties.name}</a> - <span class="textbox-info">${feature.properties.length} km, ${feature.properties.elevation} hm</span></p>`;
                textbox.style.display = 'block';
            });
            
            layer.on('mouseover', function (e) {
                if (feature.properties.category == 'Climb'){
                    this.setStyle({ color: 'orange', weight: 3 });
                } else if (feature.properties.category == 'Pass'){
                    this.setStyle({ color: 'darkblue', weight: 3 });
                } else if (feature.properties.category == 'Sackgasse'){
                    this.setStyle({ color: 'red', weight: 3 });
                }
            });

            layer.on('mouseout', function (e) {
                ix = feature.properties.idd;
                if (feature.properties.category == 'Pass'){
                    if (markerStatesArray[ix]) {
                        this.setStyle({ color: 'darkblue',weight:'3' });
                    } else {
                        this.setStyle({ color: 'rgb(30,144,255)',weight:'1' });
                    } 
                } else if (feature.properties.category == 'Climb'){
                    if (markerStatesArray[ix]) {
                        this.setStyle({ color: 'orange',weight:'3' });
                    } else {
                        this.setStyle({ color: 'rgb(255,215,0)',weight:'1' });
                    }
                } else if (feature.properties.category == 'Sackgasse'){
                    if (markerStatesArray[ix]) {
                        this.setStyle({ color: 'red',weight:'3' });
                    } else {
                        this.setStyle({ color: 'rgb(255,99,71)',weight:'1' });
                    }
                }
            });
        }

        function TrackStyle(feature) {
            if (feature.properties.category == 'Climb') {
                return { color: 'rgb(255,215,0)', weight: "1" };
            } else if (feature.properties.category == 'Pass') {
                return { color: 'rgb(30,144,255)', weight: "1" };
            } else if (feature.properties.category == 'Sackgasse') {
                return { color: 'rgb(255,99,71)', weight: "1" };
            }  
        };

        function getNameById(idd) {
            const foundPass = passi.features.find(feature => String(feature.properties.idd) === String(idd));
            if (foundPass && foundPass.properties) {
                return foundPass.properties.name;
            } else {
                return 'Unknown Pass';
            }
        };
        
        function addGeoJSONTrack(map, geoJSONs, geoJSONArray, trackData) {
            var trackLayer = L.geoJSON(trackData, {
                style: TrackStyle,
                onEachFeature: geoJSONTrackSettings
            });
            var trackId = trackData.features[0].properties.idd;
            geoJSONArray[trackId] = trackLayer;
            geoJSONs.push(trackLayer);
        }
/////////add new tracks here///////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////        
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Achenpass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ächerli);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Agnel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Agueglio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Albula);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Allos);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, AlpeBernardo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, AlpeGalm);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, AlpeGera);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, AlpeGiumelloComo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, AlpeTeglio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, AmmerSattel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Antonio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Aprica);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Arlberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Arolla);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Aufkirchen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ÄulemerKreuz);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Aune);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Aval);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Avena);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ayas);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Baldo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Balisio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ballino);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Belpiano);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Berbenno);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, BerghausNagens);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bernardino);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bernina);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bettmeralp);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, BichlPass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bieler);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bisanne);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Boldo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bondone);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bonette);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, BonetteCime);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Borcola);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bordala);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bormio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Brandenberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Brennero);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Brianza);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Brocon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Buchener);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bura);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, CampoCarloMagno);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Campolongo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Castrin);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Cayolle);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Cereda);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Cervinia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Champex);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Champs);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Chamrousse);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Chatillon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Cheneil);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ciampigotto);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColDeJouxAosta);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColDeLaCroix);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColettaSalse);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColJoly);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, CollePreit);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColleSanCarlo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColNoyer);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Colombiere);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ColSabot);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Compet);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Couillole);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Craistas);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Crocedomini);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, CroceSalven);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, CroixDeCoeur);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, CroixDeFer);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Culmine);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, DeuxAlpes);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Dientner);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Dischmatal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Dresselbach);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Duft);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Duran);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Durone);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Dürreck);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Echelle);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Edelweiss);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Eibsee);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Eira);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Eisentalhöhe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ellegg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Erbe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ErlerBerg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Esischie);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, EttalerSattel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Falzarego);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Faschinajoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fauniera);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fedaia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Feldbergpass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fernpass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, FerretAosta);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Feselalp);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Finestre);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, FinstertalerStausee);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fittanze);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Flexen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fluela);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Forclaz);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Forcora);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Foscagno);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fouillouse);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ftan);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fugazze);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fuipiano);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Furcia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Furka);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Furkajoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Fürsatzhöhe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gaichtpass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Galibier);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gampen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ganda);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gardeccia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gardena);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gavia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Generoso);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gerlos);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ghisallo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Giau);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Giw);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Glandon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Glaubenberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Glaubenbielen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Glockner);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gobbera);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gottardo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Grän);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, GranBernard);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, GrandeDixence);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Granon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Grappa);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Griessenpass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Grimsel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Grosssee);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gschütt);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Guarda);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gueulaz);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Gurnigel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Guspessa);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hahntennjoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hintertux);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hirschbichl);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, HochbergChiemgau);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hochfügen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hochschwarzeck);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hochsölden);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hochstein);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hochtannberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hochwurtenspeicher);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Hohtann);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Huez);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ibergeregg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Irschenberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Iselsberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Iseran);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Izoard);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Jaufen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Jaun);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Jochgrimm);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, JouxPlane);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, JouxVerte);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Juf);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Julier);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, KaiserFranzJosef);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Kandel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Karer);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Katschberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Kaunertal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Kerschbaumer);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Kesselberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, KienerAlm);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, KitzHorn);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Klausen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Klippitz);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Koelnbreinsperre);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, KreuzbergComelico);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Kreuzweg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Kühtai);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LacDuSaut);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LacMoiry);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LagoMoulin);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LagoTeleccio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LaiDaNalps);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LangtaufenerTal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LaPlagne);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Larche);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lautaret);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lavaze);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lein);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LesArcs);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LesFonts);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Leutstetten);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lienbachsattel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Livigno);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lombarde);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Losenpass);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Loze);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, LucknerHaus);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ludwigshöhe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lue);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Luesens);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lukmanier);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lussari);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lys);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Madeleine);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, MadoneFenestre);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Madonnina);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Maloja);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Manghen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mangrt);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Maniva);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Männlichen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Marco);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, MariaEck);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Martelltal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Marzio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Maserer);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mattmark);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mauvoisin);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, MelchbodenZillertal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mendola);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Miragolo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, MittelbergJaun);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mollard);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, MontCenis);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Montecampione);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Montets);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Montevecchia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Montgenevre);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Moosalp);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mortirolo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Moutiere);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Naret);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Narro);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Nassfeld);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Neggia);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Nespello);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Niederndorfer);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Niger);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Niklasreuth);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Nivolet);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Notschrei);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Nufenen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Oberaarsee);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Oberalp);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Oberjoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Obertauern);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ofen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Oschenik);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Panarotta);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Panider);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Panthaleon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Partnun);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Passaboche);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PassoPura);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Pellegrino);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PenserJoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PetitBernard);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PianRe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PierreMoelle);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Pillon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Planches);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PlanDuLac);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PlateauMoliere);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Platzwiesen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ploecken);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Pordoi);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Pragel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Praxmar);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Pré);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Predil);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Presolana);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Primo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PuyRichard);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Reiterjoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Reschen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Rettenbachferner);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Riedberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, RiedbergZillertal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Riedl);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, RifugioCinqueTorri);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, RifugioForni);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Rinken);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Rohrmoos);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Rolle);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Roncola);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Roselend);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Rossfeld);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Rossmettlen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, RotesKreuz);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Safiental);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, SaintVeran);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Saisies);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Salmezza);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Samerberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sampeyre);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, SanBarbara);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sanetsch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, SanFermo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, SantaBarbara);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sarenne);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sattelegg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Schäftlarn);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Schauinsland);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Scheidegg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Schiestlscharte);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Schnalstal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Schoenfeldsattel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Seefeld);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, SeiserAlm);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sella);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Selvino);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sertigtal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sestriere);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, SignalDeLure);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Silz);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Simplon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Soelk);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sommo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sormano);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Speikkogel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Spitzing);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Splugen);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Staller);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Stallwieshof);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Staulanza);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Stelvio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sudelfeld);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Sulden);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Susten);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tannalp);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Täsch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, TauernmoosStausee);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tedesco);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Telegraphe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tende);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Thurn);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Thyon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tiefenbachferner);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tignes);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Timmelsjoch);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Toerwang);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tonale);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, TorriFraele);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tougnete);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, TreCime);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, TreCroci);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tremalzo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Trivigno);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Turini);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Turrach);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tzecore);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ubaye);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Umbrail);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ursprung);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ValBavona);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valberg);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valbrona);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valcava);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ValleeClaree);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valles);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valmara);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ValMare);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ValMuggio);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valparola);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ValSavarenche);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, ValThorens);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valvarrone);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Vars);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, VenterTal);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ventoux);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Vezzena);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Villach);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Vivione);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Vrsic);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Walleralm);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Weinebene);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Weissenbachsattel);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, WidiwanderEck);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Wolfgang);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Xomo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Xon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zambla);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zeno);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zermatt);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zevrail);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zillergrund);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zoncolan);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zovo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Zumis);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Matajur);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tourmalet);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Pailheres);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Ordino);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Soulor);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Aspin);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Aubisque);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Peyresourd);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Mente);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PortetAspet);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Agnes);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, MarieBlanque);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lers);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Envalira);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Portillon);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Jau);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bales);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Core);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, PierreMartin);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Arcalis);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Imperatore);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Blockhaus);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Lenzerheide);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Tivo);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Coe);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Valbona);
        addGeoJSONTrack(map, geoJSONs, geoJSONArray, Bonaigua);
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////        
        //table data
        const numberOfClimbs = geoJSONs.length;
        var lengthArray = [];
        var elevationArray = [];
        var slopeArray = [];
        var trackArray1 = [];
        var trackArray2 = [];
        var trackArray3 = [];
        var trackArray4 = [];
        var trackArray5 = [];
        var addInfo = [];
        var temp = [];
        var numberOfFeatures = 0;
        var j = 0;
        var insideRange2 = 0;

        document.getElementById('applyFilter2').addEventListener('click', fillTable);
        document.getElementById('resetFilter2').addEventListener('click', fillTable);
        document.getElementById('switchslider2').addEventListener('change', fillTable);

        function fillTable() {
            markerTable = [];
            trackTable = [];

            const eyeButtons = document.querySelectorAll('.eye-button');
            var tableLength = eyeButtons.length;
            if (tableLength > 0){
                for (var i=0;i<=tableLength-1;i++){
                    if(eyeButtons[i].classList.contains("active")){
                        eyeButtons[i].click();
                    }
                }
            }

            while (dataBody.firstChild) {
                dataBody.removeChild(dataBody.firstChild);
            }

            for (j=0; j<=highestIDD; j++){
                lengthArray[j] = 0;
                elevationArray[j] = 0;
                slopeArray[j] = 0;
            }

            trackTable = geoJSONArray;
            trackTable.forEach(function (layer) {
                const features = layer.getLayers();
                features.forEach(function (featureLayer) {
                    const idd = featureLayer.feature.properties.idd;
                    const length = featureLayer.feature.properties.length;
                    const elevation = featureLayer.feature.properties.elevation;
                    const name = featureLayer.feature.properties.name;
                    const slopeOrig = (elevation/(length*1000))*100;
                    const slope = slopeOrig.toFixed(1);

                    if (length*100 >= 100*lengthArray[idd]){lengthArray[idd] = length};
                    if (elevation*100 >= 100*elevationArray[idd]){elevationArray[idd] = elevation}; 
                    if (slope*100 >= 100*slopeArray[idd]){slopeArray[idd] = slope};  
                });
            });

            markerTable.push(marker);
            markerTable.forEach(function (layer) {
                const features = layer.getLayers();
                features.forEach(function (featureLayer) {
                    const name = featureLayer.feature.properties.name;
                    const height = featureLayer.feature.properties.height;
                    const country = featureLayer.feature.properties.country;
                    const category= featureLayer.feature.properties.category;
                    const idd = featureLayer.feature.properties.idd;
                    const coordinates = featureLayer.feature.geometry.coordinates;

                    var link = featureLayer.feature.properties.link;
                    var length = lengthArray[idd];
                    var elevation = elevationArray[idd];
                    var slope = slopeArray[idd];
                    const latitude = coordinates[1];
                    const longitude = coordinates[0];
                    insideRange2 = isInsideCircle(lat, lng, latitude, longitude, range2);

                    var layerOK = false;
                    var tracksOK = false;
                    var trackOK = [];

                    const layerDone = localStorage.getItem(`TickedCheckboxState${idd}`);

                    if(((category === 'Pass' && FilterArray2[0]) || (category === 'Climb' && FilterArray2[1]) || (category == 'Sackgasse' && FilterArray2[2])) && height >= FilterArray2[3] && height <= FilterArray2[4] && (((country === 'IT' && FilterArray2[11]) || (country === 'FR' && FilterArray2[12]) || (country == 'CH' && FilterArray2[13]) || (country == 'AT' && FilterArray2[14]) || (country == 'DE' && FilterArray2[15]) || (country == 'SLO' && FilterArray2[16]) || (country == 'AND' && FilterArray2[17]) || (country == 'ES' && FilterArray2[18])) || (!FilterArray2[11] && !FilterArray2[12] && !FilterArray2[13] && !FilterArray2[14] && !FilterArray2[15] && !FilterArray2[16] && !FilterArray2[17] && !FilterArray2[18])) && insideRange2 >= 0){
                        if(!slider2){
                            layerOK = true;
                        } else {
                            if((layerDone && JSON.parse(layerDone))) {
                                layerOK = true;
                            } else {
                                layerOK = false;
                            }
                        }
                    };

                    addInfo = [];
                    temp = [];
                    if (lengthArray[idd] > 0.1){
                        const layer = trackTable[idd];
                        numberOfFeatures = layer.getLayers().length;
                        var j;
                        for (j=0; j<=numberOfFeatures-1; j++){
                            trackArray1[j] = geoJSONArray[idd].getLayers()[j].feature.properties.name;
                            trackArray2[j] = geoJSONArray[idd].getLayers()[j].feature.properties.length;
                            trackArray3[j] = geoJSONArray[idd].getLayers()[j].feature.properties.elevation;
                            trackArray4[j] = ((geoJSONArray[idd].getLayers()[j].feature.properties.elevation/((geoJSONArray[idd].getLayers()[j].feature.properties.length)*1000))*100).toFixed(1);
                            trackArray5[j] = geoJSONArray[idd].getLayers()[j].feature.properties.link;
                            
                            if (trackArray2[j] >= FilterArray2[7] && trackArray2[j] <= FilterArray2[8] && trackArray3[j] >= FilterArray2[5] && trackArray3[j] <= FilterArray2[6] && trackArray4[j] >= FilterArray2[9] && trackArray4[j] <= FilterArray2[10]){
                                trackOK[j] = true;
                            }

                            temp = [];
                            temp[0] = trackArray5[j];
                            temp[1] = trackArray1[j];
                            temp[2] = " (" + trackArray2[j] + ' km, ' + trackArray3[j] + ' hm, ' + trackArray4[j] + ' %)'
                            addInfo[j] = temp;
                        }
                        for (j=0; j<= numberOfFeatures-1; j++){
                            if (trackOK[j]){
                                tracksOK = true;
                            }
                        }
                    } else {
                        var h = 0;
                        for(h=0; h<=0; h++){
                            temp = [];
                            temp[0] = 'https://www.quaeldich.de/';
                            temp[1] = 'click here';
                            temp[2] = " for more information until we add the track to the map";
                            addInfo[h] = temp;
                        }
                        link = 'https://www.quaeldich.de/';
                        tracksOK = false;
                    }

                    if (tracksOK && layerOK){
                        const tableRow = createRow(idd, name, country, height, length, elevation, slope, addInfo, link);
                        dataBody.appendChild(tableRow);
                    }
                });
            });
        }

        function checkboxCallback(idd, isChecked) {
            if (isChecked) {
                geoJSONArray[idd].addTo(map);
                marker.eachLayer(function (layer) {
                    const iddd = layer.feature.properties.idd;
                    if (iddd === idd) {
                        layer.addTo(map);
                    }
                });

            } else {
                var layerCheckboxes = document.querySelectorAll('.leaflet-control-layers-selector');
                var k = 0;
                var layerArray = [];
                for(k=0;k<=1;k++){
                    if (layerCheckboxes[k].checked){
                        layerCheckboxes[k].click();
                        layerArray[k] = true;
                    }
                }
                map.removeLayer(geoJSONArray[idd]);
                marker.eachLayer(function (layer) {
                    const iddd = layer.feature.properties.idd;
                    if (iddd === idd) {
                        map.removeLayer(layer);
                    }
                });
                for(k=0;k<=1;k++){
                    if (layerArray[k]){
                        layerCheckboxes[k].click();
                    }
                }
            }
        }

        function isInsideCircle(locationLat, locationLng, targetLat, targetLng, radius) {
            function haversine(lat1, lon1, lat2, lon2) {
                const R = 6371; // Radius of Earth in kilometers
                const dLat = toRadians(lat2 - lat1);
                const dLon = toRadians(lon2 - lon1);
                const a =
                    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                    Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) *
                    Math.sin(dLon / 2) * Math.sin(dLon / 2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                const distance = R * c; // Distance in kilometers
                return distance;
            }
            function toRadians(degrees) {
                return degrees * (Math.PI / 180);
            }
            const distance = haversine(locationLat, locationLng, targetLat, targetLng);
            if (radius <= 0.1) {
                return 0;
            } else {
                if (distance <= radius) {
                    return 1; // Point is inside circle
                } else {
                    return -1; // Point is outside circle
                }
            }
        }

        //filter1 data
        var MarkersSelected = false;
        var TracksSelected = false;
        var text;
        var markersCheckbox;
        var tracksCheckbox;
        var geoIDArray = [];
        var markerIDArray = [];
        var allArray = [];
        var tracksArray = [];
        var iddArray = [];
        var insideRange = 0;

        var all= L.layerGroup([]);;
        var tracks = L.layerGroup([]);

        var baseMaps = {
            "Standard": osm,
            "Satellit": satellite,
            "Topo": topo
        };
        var overlayMaps1= {
            "Icons": all,
            "Tracks": tracks
        };
        var layerControl = L.control.layers(baseMaps, overlayMaps1,{position: 'topright'}).addTo(map);

        layerControl.getContainer().addEventListener('change', function (event) {
            const eyeButtons = document.querySelectorAll('.eye-button');
            const tableLength = eyeButtons.length;
            var tableArray = [];
            if (tableLength > 0){
                for (var i=0;i<=tableLength-1;i++){
                    if(eyeButtons[i].classList.contains("active")){
                        eyeButtons[i].click();
                        tableArray[i] = true;
                    }
                }
                for (var i=0;i<=tableLength-1;i++){
                    if(tableArray[i]){
                        eyeButtons[i].click();
                    }
                }
            }
        });

        filterGeoJSONObjects();
        fillTable();
        //markersCheckbox.click();      //uncomment for user version
        document.getElementById('applyFilter1').addEventListener('click', filterGeoJSONObjects);
        document.getElementById('resetFilter1').addEventListener('click', filterGeoJSONObjects);

        function filterGeoJSONObjects() {
            allArray = [];
            tracksArray = [];
            markerIDArray = [];
            geoIDArray = [];

            const eyeButtons = document.querySelectorAll('.eye-button');
            const tableLength = eyeButtons.length;
            var tableArray = [];
            if (tableLength > 0){
                for (var i=0;i<=tableLength-1;i++){
                    if (eyeButtons[i].classList.contains("active")){
                        eyeButtons[i].click();
                        tableArray[i] = true;
                    }
                }
            }

            var markersClick = MarkersSelected;
            var tracksClick = TracksSelected;

            if (MarkersSelected){ markersCheckbox.click()};
            if (TracksSelected){ tracksCheckbox.click()};

            marks.push(marker);
            marks.forEach(function (layer) {
                const features = layer.getLayers();
                features.forEach(function (featureLayer) {
                    const country = featureLayer.feature.properties.country;
                    const category = featureLayer.feature.properties.category;
                    const height = featureLayer.feature.properties.height;
                    const idd = featureLayer.feature.properties.idd;
                    const layerDone = localStorage.getItem(`TickedCheckboxState${idd}`);
                    const coordinates = featureLayer.feature.geometry.coordinates;
                    const latitude = coordinates[1];
                    const longitude = coordinates[0];
                    insideRange = isInsideCircle(lat, lng, latitude, longitude, range1);
                    if(((category === 'Pass' && FilterArray1[0]) || (category === 'Climb' && FilterArray1[1]) || (category == 'Sackgasse' && FilterArray1[2])) && height >= FilterArray1[3] && height <= FilterArray1[4] && (((country === 'IT' && FilterArray1[11]) || (country === 'FR' && FilterArray1[12]) || (country == 'CH' && FilterArray1[13]) || (country == 'AT' && FilterArray1[14]) || (country == 'DE' && FilterArray1[15]) || (country == 'SLO' && FilterArray1[16]) || (country == 'AND' && FilterArray1[17]) || (country == 'ES' && FilterArray1[18])) || (!FilterArray1[11] && !FilterArray1[12] && !FilterArray1[13] && !FilterArray1[14] && !FilterArray1[15] && !FilterArray1[16] && !FilterArray1[17] && !FilterArray1[18])) && insideRange >= 0){
                        if(!slider1){
                            markerIDArray[idd] = idd;
                        } else {
                            if((layerDone && JSON.parse(layerDone))) {
                                markerIDArray[idd] = idd;
                            } else {
                                markerIDArray[idd] = null;
                            }
                        }
                    }
                }); 
            });

            geoJSONArray.forEach(function (layer) {
                const features = layer.getLayers();
                features.forEach(function (featureLayer) {
                    const country = featureLayer.feature.properties.country;
                    const category = featureLayer.feature.properties.category;
                    const length = featureLayer.feature.properties.length;
                    const elevation = featureLayer.feature.properties.elevation;
                    const slope = (elevation/(length*1000))*100;
                    const idd = featureLayer.feature.properties.idd;
                    const layerDone = localStorage.getItem(`TickedCheckboxState${idd}`);
                    if(((category === 'Pass' && FilterArray1[0]) || (category === 'Climb' && FilterArray1[1]) || (category == 'Sackgasse' && FilterArray1[2])) && length >= FilterArray1[7] && length <= FilterArray1[8] && elevation >= FilterArray1[5] && elevation <= FilterArray1[6] && slope >= FilterArray1[9] && slope <= FilterArray1[10] && (((country === 'IT' && FilterArray1[11]) || (country === 'FR' && FilterArray1[12]) || (country == 'CH' && FilterArray1[13]) || (country == 'AT' && FilterArray1[14]) || (country == 'DE' && FilterArray1[15]) || (country == 'SLO' && FilterArray1[16]) || (country == 'AND' && FilterArray1[17]) || (country == 'ES' && FilterArray1[18])) || (!FilterArray1[11] && !FilterArray1[12] && !FilterArray1[13] && !FilterArray1[14] && !FilterArray1[15] && !FilterArray1[16] && !FilterArray1[17] && !FilterArray1[18]))){
                        if(!slider1){
                            geoIDArray[idd] = idd;
                        } else {
                            if((layerDone && JSON.parse(layerDone))) {
                                geoIDArray[idd] = idd;
                            } else {
                                geoIDArray[idd] = null;
                            }
                        }
                    }
                });
            });

            iddArray = [];
            for (var i=0; i<=highestIDD; i++){
                if (geoIDArray[i] == i && markerIDArray[i] == i){
                    iddArray[i] = i;
                }
            }

            marks.forEach(function (layer) {
                const features = layer.getLayers();
                features.forEach(function (featureLayer) {
                    const country = featureLayer.feature.properties.country;
                    const idd = featureLayer.feature.properties.idd;
                    if (iddArray[idd] == idd){
                        allArray.push(featureLayer);
                    }
                }); 
            });

            geoJSONArray.forEach(function (layer) {
                const features = layer.getLayers();
                features.forEach(function (featureLayer) {
                    const country = featureLayer.feature.properties.country;
                    const idd = featureLayer.feature.properties.idd;
                    if (iddArray[idd] == idd){
                        tracksArray.push(featureLayer);
                    }
                });
            });

            layerControl.removeLayer(all);
            layerControl.removeLayer(tracks);

            all = L.layerGroup(allArray);
            tracks = L.layerGroup(tracksArray);
            
            layerControl.addOverlay(all, "Icons");
            layerControl.addOverlay(tracks, "Tracks");

            labels = 0;
            labels = layerControl.getContainer().querySelectorAll('label');
            clickevents();

            if (markersClick){ markersCheckbox.click()};
            if (tracksClick){ tracksCheckbox.click()};
            
            for (var i=0;i<=tableLength-1;i++){
                if(tableArray[i]){
                    eyeButtons[i].click();
                }
            }
        };
        
        function clickevents(){
            labels.forEach(function (label) {
                text = label.textContent.trim();
                if (text === 'Icons') {
                    markersCheckbox = label.querySelector('input[type="checkbox"]');
                    if (markersCheckbox) {
                        markersCheckbox.addEventListener('click', function (e) {
                            MarkersSelected = e.target.checked;
                            if (!MarkersSelected){
                                for(var i = 0; i <= highestIDD; i++){
                                    markerStates[i] = false;
                                    markerStatesArray[i] = false;
                                    if(geoJSONArray[i]){
                                        var category = geoJSONArray[i].getLayers().length > 0 ? geoJSONArray[i].getLayers()[0].feature.properties.category : null;
                                        switch (category) {
                                            case 'Pass':
                                                geoJSONArray[i].setStyle({ color: 'rgb(30,144,255)', weight: '1' }); break;
                                            case 'Climb':
                                                geoJSONArray[i].setStyle({ color: 'rgb(255,215,0)', weight: '1' }); break;
                                            case 'Sackgasse':
                                                geoJSONArray[i].setStyle({ color: 'rgb(255,99,71)', weight: '1' }); break;
                                            default:
                                                geoJSONArray[i].setStyle({ color: 'rgb(255,255,255,0)', weight: '1' }); break;
                                        }
                                        map.removeLayer(geoJSONArray[i]);
                                    }
                                }
                                if (TracksSelected){
                                    tracksCheckbox.click();  
                                }
                            }
                        });
                    }
                } else if (text === 'Tracks') {
                    tracksCheckbox = label.querySelector('input[type="checkbox"]');
                    if (tracksCheckbox) {
                        tracksCheckbox.addEventListener('click', function (e) {
                            TracksSelected = e.target.checked;
                            if (TracksSelected){
                                if (!MarkersSelected){
                                    markersCheckbox.click(); 
                                } else {
                                    tracksCheckbox.click();
                                    tracksCheckbox.click();
                                    for(var i = 0; i <= highestIDD; i++){
                                        markerStates[i] = false;
                                        markerStatesArray[i] = false;
                                    }
                                }
                            } else {
                                if (MarkersSelected){
                                    for(var i = 0; i <= highestIDD; i++){
                                        markerStates[i] = false;
                                        markerStatesArray[i] = false;
                                        if(geoJSONArray[i]){
                                            var category = geoJSONArray[i].getLayers().length > 0 ? geoJSONArray[i].getLayers()[0].feature.properties.category : null;
                                            switch (category) {
                                                case 'Pass':
                                                    geoJSONArray[i].setStyle({ color: 'rgb(30,144,255)', weight: '1' }); break;
                                                case 'Climb':
                                                    geoJSONArray[i].setStyle({ color: 'rgb(255,215,0)', weight: '1' }); break;
                                                case 'Sackgasse':
                                                    geoJSONArray[i].setStyle({ color: 'rgb(255,99,71)', weight: '1' }); break;
                                                default:
                                                    geoJSONArray[i].setStyle({ color: 'rgb(255,255,255,0)', weight: '1' }); break;
                                            }
                                            map.removeLayer(geoJSONArray[i]);
                                        }
                                    }  
                                }
                                
                            }
                        });
                    }
                }
            });
        }
    </script>
</body>
</html>